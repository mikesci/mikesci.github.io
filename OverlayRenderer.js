!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=378)}({0:function(e,t){e.exports=React},137:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(0),o=n.n(r);n(338);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=l(t).call(this,e),n=!o||"object"!==a(o)&&"function"!=typeof o?u(r):o,p(u(n),"_knockoutIdCounter",0),p(u(n),"onRegisterKnockout",function(){var e=n._knockoutIdCounter++;return n.setState(function(t){var n=Object.assign({},t.knockouts);return n[e]="",{knockouts:n}}),e}),p(u(n),"onUpdateKnockout",function(e,t){n.setState(function(n){var r=Object.assign({},n.knockouts);return r[e]=t,{knockouts:r}})}),p(u(n),"onRemoveKnockout",function(e){n.setState(function(t){var n=Object.assign({},t.knockouts);return delete n[e],{knockouts:n}})}),n.state={knockouts:{}},n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=null,n=null,r=Object.values(this.state.knockouts);return r.length>0&&(n={clipPath:"url(#knockoutClippath)"},t=o.a.createElement("svg",{style:{position:"absolute",top:"-99999px"},viewBox:"0 0 1920 1080",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("defs",null,o.a.createElement("clipPath",{id:"knockoutClippath"},o.a.createElement("path",{ref:"knockoutPath",d:"M-10000 -10000 L10000 -10000 L10000 10000 L-10000 10000 L-10000 -10000 "+r.join(" ")+"Z"}))))),o.a.createElement("div",{className:"knockout-wrapper",ref:"knockoutWrapper",style:n},t,this.props.layers.map(function(t,n){var r=e.props.elements[t.elementName];if(!r)return null;if(t.hidden)return null;var a={top:t.top+"px",left:t.left+"px",height:t.height+"px",width:t.width+"px",zIndex:1e4-n};return t.rotation&&(a.transform="rotate(".concat(t.rotation,"deg)")),o.a.createElement("div",{className:"layer-container",key:t.id,"data-id":t.id,style:a},o.a.createElement(r,i({},t.config,{layer:t,onRegisterKnockout:e.onRegisterKnockout,onUpdateKnockout:e.onUpdateKnockout,onRemoveKnockout:e.onRemoveKnockout})))}))}}])&&s(n.prototype,r),f&&s(n,f),t}()},16:function(e,t){e.exports=ReactDOM},20:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(i=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),a=r.sources.map(function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")});return[n].concat(a).concat([o]).join("\n")}var i,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var i=0;i<e.length;i++){var s=e[i];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},21:function(e,t,n){var r,o,a={},i=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,c=0,p=[],f=n(50);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=a[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(g(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(g(r.parts[i],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],r={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=l(e.insertAt.before,n);n.insertBefore(t,o)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return b(t,e.attrs),m(e,t),t}function b(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function g(e,t){var n,r,o,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var i=c++;n=u||(u=v(t)),r=S.bind(null,n,i,!1),o=S.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),m(e,t),t}(t),r=E.bind(null,n,t),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),r=_.bind(null,n),o=function(){y(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return d(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var i=n[o];(s=a[i.id]).refs--,r.push(s)}e&&d(h(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete a[s.id]}}}};var w,k=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function S(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function _(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function E(e,t,n){var r=n.css,o=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||a)&&(r=f(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}},338:function(e,t,n){var r=n(339);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(21)(r,o);r.locals&&(e.exports=r.locals)},339:function(e,t,n){(e.exports=n(20)(!1)).push([e.i,".layer-container { position: absolute; display: flex; }",""])},378:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(16),i=n.n(a),s=n(137),l=n(41),u=n(66);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.OverlayRenderer=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_lastOptions",void 0),p(this,"_appElement",void 0),p(this,"_elements",void 0)}var t,n,r;return t=e,(n=[{key:"_loadElements",value:function(e){var t=this._elements||Object.assign({},u.a.Builtin),n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;s.elementName&&s.elementName.startsWith("http")&&!t[s.elementName]&&(t[s.elementName]=l.a.MakeComponent({url:s.elementName,manifest:{}}))}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}this._elements=t}},{key:"mount",value:function(e){if(e)this._lastOptions=e;else{if(!this._lastOptions)return void console.log("No options provided.");e=this._lastOptions}this._appElement||(e.target.style,this._appElement=document.createElement("div"),this._appElement.id="app",e.target.appendChild(this._appElement)),this._loadElements(e.layers),i.a.render(o.a.createElement(s.a,{layers:e.layers,elements:this._elements}),this._appElement)}}])&&c(t.prototype,n),r&&c(t,r),e}())},41:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}t.a=new(function(){function e(){c(this,e)}return f(e,[{key:"LoadFromUrl",value:function(e){return new Promise(function(t,n){var r=!1,o=document.createElement("iframe");function a(){r||(r=!0,window.removeEventListener("message",i),document.body.removeChild(o))}function i(n){n.data&&n.data.manifest&&(a(),t({url:e,manifest:n.data.manifest}))}o.style.display="none",document.body.appendChild(o),window.addEventListener("message",i,!1),setTimeout(function(){a(),n("Installation timed out.")},5e3),o.src=e})}},{key:"MakeComponent",value:function(e){var t,n;return n=t=function(t){function n(e){var t,r,o;return c(this,n),r=this,t=!(o=i(n).call(this,e))||"object"!==a(o)&&"function"!=typeof o?s(r):o,u(s(t),"_lastSrc",void 0),t._lastSrc=t.buildIframeSrc(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,o.a.Component),f(n,[{key:"buildIframeSrc",value:function(t){var n=JSON.stringify(t);return e.url+"?showMode=1#"+n}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.buildIframeSrc(e);return this._lastSrc!=n&&(this._lastSrc=n,!0)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),o.a.createElement("iframe",{src:this._lastSrc,style:{flex:"1 1 auto",border:"0"}}))}}]),n}(),u(t,"MANIFEST",{isExternal:!0,name:e.manifest.name,description:e.manifest.description,author:e.manifest.author,width:e.manifest.width,height:e.manifest.height,preserveAspect:e.manifest.preserveAspect,parameters:e.manifest.parameters}),n}}]),e}())},49:function(e,t,n){"use strict";t.a=["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Lucida Sans Unicode","Lucida Console","Tahoma","Trebuchet MS","Times New Roman","Verdana"]},50:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},66:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(49);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_loadedFonts",[]),i(this,"EnsureFont",function(e){return a.a.includes(e)?null:t._loadedFonts.includes(e)?null:new Promise(function(n,r){t._loadedFonts.push(e);var o=document.createElement("link");o.rel="stylesheet",o.href="https://fonts.googleapis.com/css?family="+encodeURIComponent(e),o.addEventListener("load",n),o.addEventListener("abort",r),o.addEventListener("error",r),document.head.appendChild(o)})})};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){return u(this,t),f(this,h(t).apply(this,arguments))}return m(t,o.a.Component),p(t,[{key:"render",value:function(){var e=Object.assign({},this.props.style,{flex:"1 1 auto"});return o.a.createElement("div",{style:e})}}]),t}();v(b,"MANIFEST",{name:"Rectangle",author:"SCI",description:"A customizable rectangle.",width:400,height:400,preserveAspect:!1,parameters:[{name:"style",type:"style",displayName:"Style",grouped:!1,defaultValue:{backgroundColor:"#8247cf",borderRadius:"20px"}}]});var g=function(e){function t(){var e,n;u(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return v(d(n=f(this,(e=h(t)).call.apply(e,[this].concat(o)))),"_knockoutId",void 0),v(d(n),"_lastRect",void 0),n}return m(t,o.a.Component),p(t,[{key:"componentDidMount",value:function(){this._knockoutId=this.props.onRegisterKnockout(),this.props.onUpdateKnockout(this._knockoutId,this.buildPathString(this.props.layer,this.props.radius)),this._lastRect={top:this.props.layer.top,left:this.props.layer.left,width:this.props.layer.width,height:this.props.layer.height,radius:this.props.radius}}},{key:"shouldComponentUpdate",value:function(e,t){var n=!1;return e.layer.top!=this._lastRect.top&&(n=!0,this._lastRect.top=e.layer.top),e.layer.left!=this._lastRect.left&&(n=!0,this._lastRect.left=e.layer.left),e.layer.width!=this._lastRect.width&&(n=!0,this._lastRect.width=e.layer.width),e.layer.height!=this._lastRect.height&&(n=!0,this._lastRect.height=e.layer.height),e.radius!=this._lastRect.radius&&(n=!0,this._lastRect.radius=e.radius),n&&this.props.onUpdateKnockout(this._knockoutId,this.buildPathString(e.layer,e.radius)),!1}},{key:"componentWillUnmount",value:function(){this.props.onRemoveKnockout(this._knockoutId)}},{key:"buildPathString",value:function(e,t){var n;return null!=t&&t.length>0&&(n=parseInt(t)),n&&!isNaN(n)?(n=Math.min(Math.min(n,e.height/2),e.width/2),"M".concat(e.left," ").concat(e.top+n," L").concat(e.left," ").concat(e.top+e.height-n," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left+n," ").concat(e.top+e.height," L").concat(e.left+e.width-n," ").concat(e.top+e.height," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left+e.width," ").concat(e.top+e.height-n," L").concat(e.left+e.width," ").concat(e.top+n," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left+e.width-n," ").concat(e.top," L").concat(e.left+n," ").concat(e.top," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left," ").concat(e.top+n)):"M".concat(e.left," ").concat(e.top," L").concat(e.left," ").concat(e.top+e.height," L").concat(e.left+e.width," ").concat(e.top+e.height," L").concat(e.left+e.width," ").concat(e.top," L").concat(e.left," ").concat(e.top)}},{key:"render",value:function(){return null}}]),t}();v(g,"MANIFEST",{name:"Knockout",author:"SCI",description:"A customizable knockout area.",width:400,height:400,preserveAspect:!1,parameters:[{name:"radius",displayName:"Corner Radius",type:"text"}]});var w=function(e){function t(e){var n;u(this,t);var r=!0;return(n=f(this,h(t).call(this,e))).props.font&&n.props.font.fontFamily&&(r=n.ensureFont(n.props.font.fontFamily)),n.state={loaded:r},n}return m(t,o.a.Component),p(t,[{key:"shouldComponentUpdate",value:function(e){e.font&&this.props.font&&(e.font.fontFamily!=this.props.font.fontFamily&&(this.ensureFont(e.font.fontFamily)||this.setState({loaded:!1})));return!0}},{key:"ensureFont",value:function(e){var t=this,n=s.EnsureFont(e);return!n||(n.then(function(){return t.setState({loaded:!0})}).catch(function(){return t.setState({loaded:!0})}),!1)}},{key:"render",value:function(){if(!this.state.loaded)return null;var e=Object.assign({},this.props.font,{height:"100%",width:"100%",overflow:"hidden"});return o.a.createElement("div",{style:e},this.props.text)}}]),t}();v(w,"MANIFEST",{name:"Text",author:"SCI",description:"A customizable text element.",width:400,height:400,preserveAspect:!1,parameters:[{name:"text",displayName:"Text",type:"text",defaultValue:"text"},{name:"font",displayName:"Font",type:"font",defaultValue:{fontSize:"144pt",color:"rgba(255,255,255,1)"}}]});var k=function(e){function t(){return u(this,t),f(this,h(t).apply(this,arguments))}return m(t,o.a.Component),p(t,[{key:"render",value:function(){Object.assign({},this.props.style);return o.a.createElement("svg",{style:{flex:"1 1 auto"}},o.a.createElement("ellipse",{cx:"50%",cy:"50%",rx:"50%",ry:"50%",fill:this.props.fill}))}}]),t}();v(k,"MANIFEST",{name:"Ellipse",author:"SCI",description:"A customizable ellipse or circle.",width:400,height:400,preserveAspect:!1,parameters:[{name:"fill",type:"color",displayName:"Fill Color",defaultValue:"#FF0000"}]});var S=function(e){function t(e){var n;return u(this,t),(n=f(this,h(t).call(this,e))).state={preloaded:!1},n}return m(t,o.a.Component),p(t,[{key:"componentDidMount",value:function(){var e=this;new Promise(function(t,n){var r=new Image;r.addEventListener("load",t),r.addEventListener("error",t),r.addEventListener("abort",t),r.src=e.props.url}).then(function(){e.setState({preloaded:!0})}).catch(function(t){e.setState({preloaded:!0})})}},{key:"render",value:function(){return this.state.preloaded?o.a.createElement("img",{src:this.props.url,style:Object.assign({},this.props.style,{height:"100%",width:"100%",objectFit:this.props.fit,objectPosition:this.props.offset})}):null}}]),t}();v(S,"MANIFEST",{name:"Image",author:"SCI",description:"A customizable image.",width:400,height:400,preserveAspect:!1,parameters:[{name:"url",displayName:"Url",type:"text"},{name:"fit",displayName:"Fit",type:"select",defaultValue:"cover",options:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"Fill",value:"fill"}]},{name:"offset",displayName:"Offset",type:"text"},{name:"style",type:"style",displayName:"Style"}]});var _=function(e){function t(e){var n;return u(this,t),v(d(n=f(this,h(t).call(this,e))),"onLoadedData",function(e){n.setState({preloaded:!0}),n.props.playing&&n.refs.vid.play().catch(function(e){console.log(e.message)})}),n.state={preloaded:!1},n}return m(t,o.a.Component),p(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.playing!=e.playing&&(e.playing?this.refs.vid.play():this.refs.vid.pause()),this.props.url!=e.url&&this.refs.vid.load(),!0}},{key:"componentDidUpdate",value:function(){this.refs.vid.volume=(null!=this.props.volume?this.props.volume:100)/100}},{key:"render",value:function(){var e=Object.assign({},this.props.style,{height:"100%",width:"100%",objectFit:this.props.fit,objectPosition:this.props.offset,opacity:this.state.preloaded?1:0});return o.a.createElement("video",{ref:"vid",onLoadedData:this.onLoadedData,loop:this.props.loop,style:e},o.a.createElement("source",{src:this.props.url}))}}]),t}();v(_,"MANIFEST",{name:"Video",author:"SCI",description:"A customizable video player.",width:1280,height:720,preserveAspect:!0,parameters:[{name:"url",displayName:"Url",type:"text"},{name:"playing",type:"checkbox",displayName:"Playing",defaultValue:!0},{name:"loop",type:"checkbox",displayName:"Loop",defaultValue:!1},{name:"volume",type:"slider",displayName:"Volume",defaultValue:100},{name:"fit",displayName:"Fit",type:"select",defaultValue:"cover",options:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"Fill",value:"fill"}]},{name:"offset",displayName:"Offset",type:"text"},{name:"style",type:"style",displayName:"Style"}]});var E=function(e){function t(e){var n;return u(this,t),v(d(n=f(this,h(t).call(this,e))),"onLoadedData",function(e){n.setState({preloaded:!0}),n.props.playing&&n.refs.audio.play().catch(function(e){console.log(e.message)})}),n.state={preloaded:!1},n}return m(t,o.a.Component),p(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.playing!=e.playing&&(e.playing?this.refs.audio.play():this.refs.audio.pause()),this.props.url!=e.url&&this.refs.audio.load(),!0}},{key:"componentDidUpdate",value:function(){this.refs.audio.volume=(null!=this.props.volume?this.props.volume:100)/100}},{key:"render",value:function(){return o.a.createElement("audio",{ref:"audio",onLoadedData:this.onLoadedData,loop:this.props.loop},o.a.createElement("source",{src:this.props.url}))}}]),t}();v(E,"MANIFEST",{name:"Audio",author:"SCI",description:"A customizable audio player.",nonVisual:!0,parameters:[{name:"url",displayName:"Url",type:"text"},{name:"playing",type:"checkbox",displayName:"Playing",defaultValue:!0},{name:"loop",type:"checkbox",displayName:"Loop",defaultValue:!1},{name:"volume",type:"slider",displayName:"Volume",defaultValue:100}]});var O=function(e){function t(){return u(this,t),f(this,h(t).apply(this,arguments))}return m(t,o.a.Component),p(t,[{key:"render",value:function(){var e=Object.assign({},this.props.style,{border:"0",flex:"1 1 auto"});return o.a.createElement("iframe",{src:this.props.url,style:e})}}]),t}();v(O,"MANIFEST",{name:"Iframe",author:"SCI",description:"A customizable iframe.",width:400,height:400,preserveAspect:!1,parameters:[{name:"url",type:"text",displayName:"Url"},{name:"style",type:"style",displayName:"Style"}]});var x=function(e){function t(e){var n;return u(this,t),v(d(n=f(this,h(t).call(this,e))),"_queuedOperations",{playing:[]}),v(d(n),"onStateChange",function(e){if(1==e.data)for(;n._queuedOperations.playing.length>0;)n._queuedOperations.playing.splice(0,1)[0]()}),v(d(n),"updatePlayerState",function(e,t){if(t.url!=e.url){var r=n.getYoutubeUrl(t);n._player.loadVideoByUrl(r),n._queuedOperations.playing.push(function(){n._player.seekTo(0)})}if(t.url!=e.url||t.start!=e.start){var o=n._player.getPlayerState();1==o||-1==o?n._player.seekTo(t.start):n._queuedOperations.playing.push(function(){n._player.seekTo(t.start)})}t.playing!=e.playing&&(t.playing?n._player.playVideo():n._player.pauseVideo()),t.volume!=e.volume&&n._player.setVolume(t.volume)}),v(d(n),"getYoutubeUrl",function(e){if(!e.url)return"";var n=e.url.match(t.URL_REGEX);if(null==n||n.length<2||0==n[1].length)return"";var r=n[1];return"http://www.youtube.com/v/".concat(r,"?version=3")}),window.onYouTubeIframeAPIReadyPromise||(window.onYouTubeIframeAPIReadyPromise=new Promise(function(e){if(window.YT)e();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/iframe_api",document.head.append(t),window.onYouTubeIframeAPIReady=e}})),n}return m(t,o.a.Component),p(t,[{key:"componentDidMount",value:function(){var e=this,t=this;window.onYouTubeIframeAPIReadyPromise.then(function(){var n=new YT.Player(e.refs.target,{width:"100%",height:"100%",playerVars:{controls:0,modestbranding:1},events:{onReady:function(e){t.updatePlayerState({},t.props)},onStateChange:t.onStateChange}});e._player=n})}},{key:"shouldComponentUpdate",value:function(e,t){return this.updatePlayerState(this.props,e),!0}},{key:"render",value:function(){var e=Object.assign({},this.props.style,{overflow:"hidden",flex:"1 1 auto",display:null!=this.props.url&&this.props.url.length>0?"block":"none"});return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),o.a.createElement("div",{style:e},o.a.createElement("div",{ref:"target"})))}}]),t}();v(x,"MANIFEST",{name:"Youtube",author:"SCI",description:"A customizable YouTube player.",width:1280,height:720,preserveAspect:!0,parameters:[{name:"url",type:"text",displayName:"Url"},{name:"playing",type:"checkbox",displayName:"Playing",defaultValue:!0},{name:"start",type:"text",displayName:"Start At (s)"},{name:"volume",type:"slider",displayName:"Volume",defaultValue:100},{name:"style",type:"style",displayName:"Style"}]}),v(x,"URL_REGEX",/.*(?:www\.youtube\.com\/(?:(?:watch\?v=)|(?:embed\/))|(?:youtu\.be\/))([a-z0-9]+)(?:\?(?:(?:t)|(?:start))=(\d+))?/i);t.a={MakeExternal:function(e){var t,n;return n=t=function(t){function n(e){var t;return u(this,n),v(d(t=f(this,h(n).call(this,e))),"_lastSrc",void 0),t._lastSrc=t.buildIframeSrc(e),t}return m(n,o.a.Component),p(n,[{key:"buildIframeSrc",value:function(t){var n=JSON.stringify(t);return e.url+"?showMode=1#"+n}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.buildIframeSrc(e);return this._lastSrc!=n&&(this._lastSrc=n,!0)}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),o.a.createElement("iframe",{src:this._lastSrc,style:{flex:"1 1 auto",border:"0"}}))}}]),n}(),v(t,"MANIFEST",{isExternal:!0,name:e.manifest.name,description:e.manifest.description,author:e.manifest.author,width:e.manifest.width,height:e.manifest.height,preserveAspect:e.manifest.preserveAspect,parameters:e.manifest.parameters}),n},Builtin:{rectangle:b,text:w,ellipse:k,image:S,video:_,audio:E,knockout:g,iframe:O,youtube:x}}}});