(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[3],{325:function(e,t,n){"use strict";(function(e){var a=n(3),r=n.n(a),o=n(0),i=n.n(o);t.a=new function t(){r()(this,t),i()(this,"modelToString",(function(t){return e.from(JSON.stringify(t),"utf8").toString("base64")})),i()(this,"stringToModel",(function(t){return JSON.parse(e.from(t,"base64").toString("utf8"))}))}}).call(this,n(326).Buffer)},330:function(e,t,n){var a=n(331);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},331:function(e,t,n){(t=n(82)(!1)).push([e.i,".collapsable-layer .label { flex: 1 1 100%; width: 100%; justify-content: flex-start !important; }\r\n.collapsable-layer .inner { background: rgba(0,0,0,0.25); border-bottom-left-radius:4px; border-bottom-right-radius:4px; overflow: hidden; }\r\n.collapsable-layer .inner > .configuration-form { padding: 10px; }",""]),e.exports=t},453:function(e,t,n){var a=n(454);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},454:function(e,t,n){(t=n(82)(!1)).push([e.i,"/*# sourceURL=FontStyleEditor.css*/\r\n\r\n\r\n.font-style-editor {  }\r\n.font-style-editor .line-1 { }\r\n.font-style-editor .line-2 { }\r\n.font-style-editor .font-family { flex-basis: 65% !important; }\r\n.font-style-editor .font-size { width: 100px; }\r\n.font-style-editor .font-color { width: 50px; }\r\n\r\n.font-style-editor .border-input { display: flex; flex-direction: row; justify-content: flex-start; align-items: stretch; height: 100%; }\r\n.font-style-editor .border-input input[type='color'] { width: 2em !important; height: 2em; margin-right: 0.1em; }\r\n.font-style-editor .border-input select { width: 10em !important; margin-right: 0.1em; }\r\n.font-style-editor .border-input input[type='text'] { width: 5em !important; margin-right: 0.1em; }",""]),e.exports=t},455:function(e,t,n){var a=n(456);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},456:function(e,t,n){(t=n(82)(!1)).push([e.i,".group { }\r\n.group-label { flex: 1 1 100%; width: 100%; justify-content: flex-start !important; }\r\n.group-inner { padding: 10px; background: rgba(0,0,0,0.25); border-bottom-left-radius:4px; border-bottom-right-radius:4px; overflow: hidden; }",""]),e.exports=t},457:function(e,t,n){var a=n(458);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},458:function(e,t,n){(t=n(82)(!1)).push([e.i,".configuration-form { margin-bottom: -10px; display: flex; flex-direction: row; flex-wrap: wrap; justify-content: space-between; }\r\n.configuration-form > .bp3-form-group { flex: 1 1 100%; }\r\n.formgroup-slider { margin: 10px !important; }\r\n\r\n.animation-editor { display: flex; flex-direction: row; }\r\n.animation-editor > * { flex: 1 1 0; }",""]),e.exports=t},460:function(e,t,n){var a=n(461);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},461:function(e,t,n){(t=n(82)(!1)).push([e.i,".layer-list { height: 100%; display: flex; flex-direction: column; }\r\n.layer-list .layer-list-header { display: flex; justify-content: space-between; align-items: center; padding: 5px 5px 0 5px; }\r\n.layer-list .layer-list-header .left { flex: 1 1 auto; }\r\n.layer-list .layer-list-header .right { text-align: right; margin-left: 5px; }\r\n.layer-list > .layer-list-layers { margin: 5px; overflow-y: auto; }\r\n\r\n.layer-label { display: flex; justify-content: space-between; align-items: center; }\r\n.layer-label .buttons { display: flex; }\r\n.layer-label .buttons a { padding: 0; min-height: 20px; min-width: 20px; margin-left: 5px; }\r\n.layer-label .buttons a.hideable { display: none; }\r\n.layer-label:hover .buttons a.hideable { display: block; }\r\n.layer-label .buttons .bp3-editable-text:hover { cursor: default; }\r\n.layer-label .buttons .bp3-editable-text:hover::before { content: none; }\r\n.layer-label .buttons a .bp3-icon:first-child:last-child, .layer-label a .bp3-spinner + .bp3-icon:last-child { margin: 2px; }\r\n\r\n.layer-list > .layer-list-layers > .layer .effect-item { background: rgba(0,0,0,0.1);}\r\n.layer-list > .layer-list-layers > .layer .effect-item > .effect-name { background: rgba(0,0,0,0.2); padding: 5px; display: flex; justify-content: space-between; align-items: center; }\r\n.layer-list > .layer-list-layers > .layer .effect-item > .effect-name .buttons { display: flex; }\r\n.layer-list > .layer-list-layers > .layer .effect-item > .effect-name > .buttons > a { min-height: 20px; min-width: 20px; }\r\n.layer-list > .layer-list-layers > .layer .effect-item > .configuration-form { margin: 5px 5px 0 5px; }\r\n.layer-list > .layer-list-layers > .layer .effect-item > .configuration-form > .bp3-form-group { margin-bottom: 5px; }\r\n.layer-list > .layer-list-layers > .layer .btn-add-effect { background: rgba(0,0,0,0.3); }",""]),e.exports=t},462:function(e,t,n){var a=n(463);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},463:function(e,t,n){(t=n(82)(!1)).push([e.i,".zoom-selector {  }\r\n.zoom-selector select { width: 140px; }",""]),e.exports=t},464:function(e,t,n){var a=n(465);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},465:function(e,t,n){(t=n(82)(!1)).push([e.i,".resizer-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: visible; z-index: 10001; }\r\n.resizer-container .resizer-selector { position: relative; }\r\n.resizer-container .resize-handle { position: absolute; }\r\n.resizer-container .resize-handle-center { cursor: move; top: 0; left: 0; bottom: 0; right: 0; z-index: 2; }\r\n.resizer-container .resize-handle-nw { cursor: nw-resize; border-top: 1px solid Gray; border-left: 1px solid gray; top: -10px; left: -10px; width: 10px; height: 10px; }\r\n.resizer-container .resize-handle-n { cursor: ns-resize; top: -10px; left: 0; right: 0; height: 10px; }\r\n.resizer-container .resize-handle-ne { cursor: ne-resize; border-top: 1px solid Gray; border-right: 1px solid gray; top: -10px; right: -10px; width: 10px; height: 10px; }\r\n.resizer-container .resize-handle-e { cursor: ew-resize; top: 0; right: -10px; bottom: 0; width: 10px; }\r\n.resizer-container .resize-handle-se { cursor: se-resize; border-bottom: 1px solid Gray; border-right: 1px solid gray; bottom: -10px; right: -10px; width: 10px; height: 10px; }\r\n.resizer-container .resize-handle-s { cursor: ns-resize; bottom: -10px; left: 0; right: 0; height: 10px; }\r\n.resizer-container .resize-handle-sw { cursor: sw-resize; border-bottom: 1px solid Gray; border-left: 1px solid gray; bottom: -10px; left: -10px; width: 10px; height: 10px; }\r\n.resizer-container .resize-handle-w { cursor: ew-resize; top: 0; left: -10px; bottom: 0; width: 10px; }\r\n\r\n.resizer-container .resizer-subrect { position: absolute; border: 1px dashed #333; z-index: 1; }\r\n\r\n.resizer-container .resizer-selector-box { position: absolute; border: 1px dashed #ddd; z-index: 1; }",""]),e.exports=t},466:function(e,t,n){var a=n(467);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},467:function(e,t,n){(t=n(82)(!1)).push([e.i,".stage-container {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    overflow: hidden;\r\n    line-height: normal;\r\n    z-index: 1;\r\n    background: #111 url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAYAAAArdgcFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIBJREFUeNq01EsKwCAMBFBNV73/YUsLJU2ggkj90MwMzE4eEoxZVdObbN2tW1rLZT1HB4QFF5wCF5wCuyks2C8tLNjHLSy4fi1weIaH4BEehns4BP7CYXCLQ+Eah8MFp8AWzdWXC4Wth7Bg6y0seGX9f8MzPASP8DDcwyGw5xFgACKHOSst2JgZAAAAAElFTkSuQmCC');\r\n}\r\n.stage-container .stage { flex: 0 0 auto; position: relative; overflow: visible;  z-index: 1; background-size: contain; background-position: center center; background-repeat: no-repeat; }\r\n.stage-container .stage > * { height: 100%; width: 100%; background: rgba(0, 0, 0, 0.5); }\r\n.stage-container .stage-view-container { position: absolute; top: 10px; right: 10px; z-index: 10002; display: flex; }",""]),e.exports=t},468:function(e,t,n){var a=n(469);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},469:function(e,t,n){(t=n(82)(!1)).push([e.i,".active-layer-editor { padding: 0; display: flex; align-items: center; }\r\n.active-layer-editor > .bp3-form-group { margin-bottom: 0 !important; align-items: center !important; }\r\n.active-layer-editor > .bp3-form-group > .bp3-label { margin: 0 9px !important; }\r\n.active-layer-editor .layer-coordinate-inputs { flex: 1 1 auto; display: flex; justify-content: flex-end; }\r\n.active-layer-editor .layer-coordinate-inputs .bp3-form-group { margin-bottom: 0 !important; align-items: center !important; }\r\n.active-layer-editor .layer-coordinate-inputs .bp3-input { width: 52px; height: 25px; }\r\n.active-layer-editor .layer-coordinate-inputs .bp3-label { font-size: 0.9em; margin: 0 9px !important; }\r\n.active-layer-editor .effect-list-button .bp3-button-text { width: 100px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }\r\n\r\n.layer-animation-list { padding: 5px; width: 400px; }\r\n.layer-animation-list .layer-animation-item { background: rgba(0,0,0,0.1);}\r\n.layer-animation-list .layer-animation-item > .effect-name { background: rgba(0,0,0,0.2); padding: 5px; display: flex; justify-content: space-between; align-items: center; }\r\n.layer-animation-list .layer-animation-item > .effect-name .buttons { display: flex; }\r\n.layer-animation-list .layer-animation-item > .effect-name > .buttons > a { min-height: 20px; min-width: 20px; }\r\n.layer-animation-list .layer-animation-item > .configuration-form { margin: 5px 5px 0 5px; }\r\n.layer-animation-list .layer-animation-item > .configuration-form > .bp3-form-group { margin-bottom: 5px; }",""]),e.exports=t},470:function(e,t,n){var a=n(471);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},471:function(e,t,n){(t=n(82)(!1)).push([e.i,".script-wrapper { display: flex; flex-direction: column; }\r\n.script-wrapper .editor { flex: 1 1 auto; margin: 5px; background: #ffffff10; }\r\n.script-wrapper .button-bar { margin: 0 5px; display: flex; flex-direction: row; justify-content: space-between; }\r\n.script-wrapper .button-bar button { }",""]),e.exports=t},472:function(e,t,n){var a=n(473);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},473:function(e,t,n){(t=n(82)(!1)).push([e.i,".app-wrapper { width: 100%; height: 100%; display: flex; overflow: hidden; background: #293742; user-select: none; position: relative; }\r\n.app-wrapper ::-webkit-scrollbar { width: 10px; background: rgba(0,0,0,0.5); }\r\n.app-wrapper ::-webkit-scrollbar-thumb { width: 10PX; background: #137cbd; }\r\n.app-wrapper .sidepanel-wrapper {  z-index: 2; height: 100%; display: flex; flex-direction: column; width: 350px; flex: 0 0 350px; }\r\n.app-wrapper .script-wrapper { width: 450px; display: flex; flex-direction: column; flex: 0 0 450px; }\r\n.app-wrapper .rightside-wrapper { flex: 1 1 auto; display: flex; flex-direction: column; }\r\n.app-wrapper .rightside-wrapper .top-toolbar { padding: 5px 0; }\r\n.app-wrapper .stage-wrapper { flex: 1 1 auto; position: relative; }\r\n.app-wrapper .layer-list-wrapper { flex: 1 1 auto; height: 100%; overflow: hidden; }\r\n.app-wrapper .active-layer-editor-wrapper { flex: 0 0 auto; }\r\n.app-wrapper .animation-panel-wrapper { flex: 0 0 auto; }\r\n.app-wrapper .app-toaster { position: absolute !important; }\r\n\r\n/* disable focus outlines */\r\n.app-wrapper *:focus { outline: none; }",""]),e.exports=t},477:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n.n(a),o=n(31),i=n.n(o),s=n(202),l=n.n(s),u=n(32),c=n.n(u),p=n(49),d=n.n(p),f=n(3),m=n.n(f),h=n(4),y=n.n(h),g=n(2),v=n.n(g),b=n(5),x=n.n(b),S=n(13),E=n.n(S),C=n(8),w=n.n(C),k=n(0),O=n.n(k),A=n(1),D=n.n(A),R=n(192);var T={CopyToClipboard:function(e){var t=document.createElement("textarea");t.style.position="absolute",t.style.top="-99999px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),setTimeout((function(){document.body.removeChild(t)}),100)}};function P(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var _=new(function(){function e(){m()(this,e),O()(this,"_callbacks",{})}return y()(e,[{key:"Register",value:function(e,t){var n=this._callbacks[e];n||(n=[],this._callbacks[e]=n),n.push(t)}},{key:"Unregister",value:function(e,t){var n=this._callbacks[e];if(n){var a=n.indexOf(t);a>-1&&n.splice(a,1)}}},{key:"Dispatch",value:function(e){var t=this._callbacks[e];if(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var o,i=P(t);try{for(i.s();!(o=i.n()).done;){var s=o.value;s.apply(void 0,a)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"DispatchForResult",value:function(e){var t=this._callbacks[e];if(1==t.length){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return t[0].apply(t,a)}console.log("DispatchWithResult called with ".concat(t.length,"callbacks registered. (Should be 1)"))}}]),e}()),N=n(325),I=function e(){var t=this;m()(this,e),O()(this,"_undoHistory",[]),O()(this,"_undoPointer",0),O()(this,"createUndoPoint",(function(n){if(t._undoPointer>0){var a=t._undoHistory.length-t._undoPointer;t._undoHistory.splice(a,t._undoPointer),t._undoPointer=0}var r=N.a.modelToString(n);return t._undoHistory.length>e.UNDO_HISTORY_SIZE&&t._undoHistory.splice(0,1),t._undoHistory.push(r),r})),O()(this,"restoreUndoPoint",(function(e){if(0!=t._undoHistory.length){var n=t._undoPointer+(e?-1:1);if(!(n>t._undoHistory.length-1||n<0)){t._undoPointer=n;var a=t._undoHistory.length-1-t._undoPointer;if(!(a<0||a>t._undoHistory.length-1)){var r=t._undoHistory[a];return{overlay:N.a.stringToModel(r),entry:r}}}}})),O()(this,"canUndo",(function(){return t._undoHistory.length>0&&t._undoPointer<t._undoHistory.length-1})),O()(this,"canRedo",(function(){return t._undoHistory.length>0&&t._undoPointer>0}))};O()(I,"UNDO_HISTORY_SIZE",40);var M=n(209),F=n(47),V=n.n(F),B=n(232),U=n.n(B);n(330);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var j=function(e){x()(n,e);var t=z(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onToggle",(function(e){a.props.islocked||a.setState((function(e){var t=!e.isOpen;return a.props.onToggle&&a.props.onToggle(t),{isOpen:t}}))})),a.state={isOpen:a.props.isOpen||!1},a}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.intent,n=e.label,a=(e.islocked,e.active),r=e.disabled,o=e.draggable,i=e.onDragStart,s=e.onDragEnd,l=e.collapsed,u=e.leftButtons,c=e.rightButtons,p=U()(e,["intent","label","islocked","active","disabled","draggable","onDragStart","onDragEnd","collapsed","leftButtons","rightButtons"]),d=null;this.props.children&&(d=D.a.createElement(R.Collapse,{isOpen:null!=l?!l:this.state.isOpen},D.a.createElement("div",{className:"inner"},this.props.children)));var f="blank";this.props.children&&(f=this.state.isOpen?"caret-down":"caret-right");var m={};return r&&(m.opacity=.5),D.a.createElement("div",V()({className:"collapsable-layer"},p),D.a.createElement(R.ButtonGroup,{fill:!0},u,D.a.createElement(R.Button,{icon:f,onClick:this.onToggle,alignText:"left",style:m,fill:!0,intent:t,active:a,draggable:o,onDragStart:i,onDragEnd:s},n),c),d)}}]),n}(D.a.Component),G=n(268),K=n(72);n(453);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var W=function(e){x()(n,e);var t=H(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"_fontSizeDragOrigin",void 0),O()(v()(a),"onFontFamilyChanged",(function(e){a.onValueChanged({fontFamily:e.target.value},!0,!0)})),O()(v()(a),"onFontSizeChanged",(function(e){a.onValueChanged({fontSize:e.target.value},!1,!1)})),O()(v()(a),"onFontSizeBlurred",(function(e){var t=e.target.value;t.match(/[0-9]+(pt|px|em)/)||(t=t.replace(/^[0-9]\./g,"")+"pt"),a.onValueChanged({fontSize:t},!0,!0)})),O()(v()(a),"onFontSizeMouseDown",(function(e){var t,n;window.addEventListener("mousemove",a.onFontSizeMouseMove),window.addEventListener("mouseup",a.onFontSizeMouseUp);var r=l()(e.target.value.matchAll(/([0-9]+)(pt|px|em)/));0==r.length?(t=72,n="pt"):(t=parseInt(r[0][1]),n=r[0][2]),a._fontSizeDragData={originY:e.clientY,originalValue:t,originalUnits:n,value:e.target.value}})),O()(v()(a),"onFontSizeMouseUp",(function(e){a._fontSizeDragData&&a.onValueChanged({fontSize:a._fontSizeDragData.value},!0,!0),a._fontSizeDragData=null,window.removeEventListener("mousemove",a.onFontSizeMouseMove),window.removeEventListener("mouseup",a.onFontSizeMouseUp)})),O()(v()(a),"onFontSizeMouseMove",(function(e){if(a._fontSizeDragData){var t=a._fontSizeDragData.originY-e.clientY,n=Math.max(0,a._fontSizeDragData.originalValue+t);a._fontSizeDragData.value=n+a._fontSizeDragData.originalUnits,a.onValueChanged({fontSize:a._fontSizeDragData.value},!0,!1)}})),O()(v()(a),"onFontColorChanged",(function(e){a.onValueChanged({color:"rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")")},!0,!1)})),O()(v()(a),"onFontColorCommitted",(function(e){a.onValueChanged({color:"rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")")},!0,!0)})),O()(v()(a),"onBoldToggled",(function(e){a.onValueChanged({fontWeight:"bold"!=a.state.value.fontWeight?"bold":""},!0,!0)})),O()(v()(a),"onItalicToggled",(function(e){a.onValueChanged({fontStyle:"italic"!=a.state.value.fontStyle?"italic":""},!0,!0)})),O()(v()(a),"onUnderlineToggled",(function(e){a.onValueChanged({textDecoration:"underline"!=a.state.value.textDecoration?"underline":""},!0,!0)})),O()(v()(a),"onTextAlignToggled",(function(e){a.onValueChanged({textAlign:a.state.value.textAlign!=e?e:""},!0,!0)})),O()(v()(a),"onTextKeyDown",(function(e){"Enter"==e.key&&(e.preventDefault(),e.target.blur())})),O()(v()(a),"parseColor",(function(e){var t=e.match(n.RGBA_COLOR_REGEX);return t?{r:t[1],g:t[2],b:t[3],a:t[4]}:""})),a.state=a.getStateFromProps(a.props.value),a}return y()(n,[{key:"componentDidUpdate",value:function(){this.state.initialValue!=this.props.value&&this.setState(this.getStateFromProps(this.props.value))}},{key:"getStateFromProps",value:function(e){var t=e||{};return{initialValue:e,value:{fontFamily:t.fontFamily||"",fontSize:t.fontSize||"",color:t.color||"",fontWeight:t.fontWeight||"",fontStyle:t.fontStyle||"",textDecoration:t.textDecoration||"",textAlign:t.textAlign||""}}}},{key:"onValueChanged",value:function(e,t,n){var a=this;this.setState((function(t){return{value:Object.assign({},t.value,e)}}),(function(){t&&a.props.onChange(a.props.param,a.state.value,n)}))}},{key:"render",value:function(){var e=this,t=K.a.GetFontNames();return D.a.createElement("div",{className:"font-style-editor"},D.a.createElement(R.ControlGroup,{fill:!0},D.a.createElement(R.HTMLSelect,{value:this.state.value.fontFamily,onChange:this.onFontFamilyChanged,options:t,className:"font-family",fill:!0}),D.a.createElement(R.InputGroup,{type:"text",value:this.state.value.fontSize,onChange:this.onFontSizeChanged,onBlur:this.onFontSizeBlurred,onKeyDown:this.onTextKeyDown,onMouseDown:this.onFontSizeMouseDown,className:"font-size"}),D.a.createElement(R.Popover,{boundary:"window"},D.a.createElement(R.Button,{className:"font-color",style:{backgroundColor:this.state.value.color},text:""}),D.a.createElement(G.SketchPicker,{color:this.parseColor(this.state.value.color),onChange:this.onFontColorChanged,onChangeComplete:this.onFontColorCommitted}))),D.a.createElement(R.ButtonGroup,{fill:!0},D.a.createElement(R.Button,{icon:"bold",active:"bold"==this.state.value.fontWeight,onClick:this.onBoldToggled}),D.a.createElement(R.Button,{icon:"italic",active:"italic"==this.state.value.fontStyle,onClick:this.onItalicToggled}),D.a.createElement(R.Button,{icon:"underline",active:"underline"==this.state.value.textDecoration,onClick:this.onUnderlineToggled}),D.a.createElement(R.Button,{icon:"align-left",active:"left"==this.state.value.textAlign,onClick:function(){return e.onTextAlignToggled("left")}}),D.a.createElement(R.Button,{icon:"align-center",active:"center"==this.state.value.textAlign,onClick:function(){return e.onTextAlignToggled("center")}}),D.a.createElement(R.Button,{icon:"align-right",active:"right"==this.state.value.textAlign,onClick:function(){return e.onTextAlignToggled("right")}})))}}]),n}(D.a.Component);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}O()(W,"RGBA_COLOR_REGEX",/^rgba\((\d+),(\d+),(\d+),(\d*(?:\.\d+)?)\)$/i);var X=function(e){x()(n,e);var t=J(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onTextChanged",(function(e,t){var n={};n[e]=t,a.onValueChanged(n,!1,!1)})),a.state=a.getStateFromProps(e.value),a}return y()(n,[{key:"componentDidUpdate",value:function(){this.state.initialValue!=this.props.value&&this.setState(this.getStateFromProps(this.props.value))}},{key:"getStateFromProps",value:function(e){var t=e||{},n={duration:t.duration,timing:t.timing,delay:t.delay,iterations:t.iterations,direction:t.direction,fill:t.fill};return null==n.duration&&(n.duration=this.props.param.defaultValue.duration),null==n.timing&&(n.timing=this.props.param.defaultValue.timing),null==n.delay&&(n.delay=this.props.param.defaultValue.delay),null==n.iterations&&(n.iterations=this.props.param.defaultValue.iterations),null==n.direction&&(n.direction=this.props.param.defaultValue.direction),null==n.fill&&(n.fill=this.props.param.defaultValue.fill),{initialValue:e,value:n}}},{key:"onValueChanged",value:function(e,t,n){var a=this;this.setState((function(t){return{value:Z(Z({},t.value),e)}}),(function(){if(t){for(var e=Z({},a.state.value),o=0,i=Object.entries(a.state.value);o<i.length;o++){var s=r()(i[o],2),l=s[0];""==s[1]&&delete e[l]}a.props.onChange(a.props.param,e,n)}}))}},{key:"render",value:function(){var e=this;return D.a.createElement("div",{className:"animation-editor"},D.a.createElement(R.FormGroup,{label:"Duration"},D.a.createElement(R.InputGroup,{value:this.state.value.duration||"",onChange:function(t){return e.onTextChanged("duration",t.target.value)},onBlur:function(t){return e.onValueChanged({duration:t.target.value},!0,!0)}})),D.a.createElement(R.FormGroup,{label:"Timing"},D.a.createElement(R.HTMLSelect,{value:this.state.value.timing||"",onChange:function(t){return e.onValueChanged({timing:t.target.value},!0,!0)}},D.a.createElement("option",{value:""},"Ease"),D.a.createElement("option",{value:"ease-in"},"Ease In"),D.a.createElement("option",{value:"ease-out"},"Ease Out"),D.a.createElement("option",{value:"linear"},"Linear"))),D.a.createElement(R.FormGroup,{label:"Delay"},D.a.createElement(R.InputGroup,{value:this.state.value.delay||"",onChange:function(t){return e.onTextChanged("delay",t.target.value)},onBlur:function(t){return e.onValueChanged({delay:t.target.value},!0,!0)}})),D.a.createElement(R.FormGroup,{label:"Loop"},D.a.createElement(R.HTMLSelect,{value:this.state.value.iterations||"",onChange:function(t){return e.onValueChanged({iterations:t.target.value},!0,!0)}},D.a.createElement("option",{value:""},"1"),D.a.createElement("option",{value:"2"},"2"),D.a.createElement("option",{value:"3"},"3"),D.a.createElement("option",{value:"4"},"4"),D.a.createElement("option",{value:"5"},"5"),D.a.createElement("option",{value:"6"},"6"),D.a.createElement("option",{value:"7"},"7"),D.a.createElement("option",{value:"8"},"8"),D.a.createElement("option",{value:"9"},"9"),D.a.createElement("option",{value:"10"},"10"),D.a.createElement("option",{value:"infinite"},"Infinite"))),D.a.createElement(R.FormGroup,{label:"Direction"},D.a.createElement(R.HTMLSelect,{value:this.state.value.direction||"",onChange:function(t){return e.onValueChanged({direction:t.target.value},!0,!0)}},D.a.createElement("option",{value:""},"Forward"),D.a.createElement("option",{value:"reverse"},"Reverse"),D.a.createElement("option",{value:"alternate"},"Alternate"),D.a.createElement("option",{value:"alternate-reverse"},"Reverse Alternate"))))}}]),n}(D.a.Component);n(455);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var q=function(e){x()(n,e);var t=$(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onToggle",(function(e){a.props.islocked||a.setState((function(e){var t=!e.isOpen;return a.props.onToggle&&a.props.onToggle(t),{isOpen:t}}))})),a.state={isOpen:a.props.isOpen||!1},a}return y()(n,[{key:"render",value:function(){var e=this.props,t=e.intent,n=e.label,a=(e.islocked,e.active),r=e.disabled,o=e.draggable,i=e.onDragStart,s=e.onDragEnd,l=e.collapsed,u=U()(e,["intent","label","islocked","active","disabled","draggable","onDragStart","onDragEnd","collapsed"]),c=null;this.props.children&&(c=D.a.createElement(R.Collapse,{isOpen:null!=l?!l:this.state.isOpen},D.a.createElement("div",{className:"group-inner"},this.props.children)));var p="blank";this.props.children&&(p=this.state.isOpen?"caret-down":"caret-right");var d={};return r&&(d.opacity=.5),D.a.createElement("div",V()({className:"group"},u),D.a.createElement(R.ButtonGroup,null,this.props.leftButtons,D.a.createElement(R.Button,{icon:p,onClick:this.onToggle,alignText:"left",style:d,fill:!0,intent:t,active:a,draggable:o,onDragStart:i,onDragEnd:s},n),this.props.rightButtons),c)}}]),n}(D.a.Component);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var ee=function(e){x()(n,e);var t=Q(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onChangeValue",(function(e){a.props.onChange(a.props.param,e)})),a}return y()(n,[{key:"render",value:function(){var e=this;return D.a.createElement("div",{className:"vertical-align-editor"},D.a.createElement(R.ButtonGroup,null,D.a.createElement(R.Button,{icon:"alignment-top",active:"top"==this.props.value,onClick:function(){return e.onChangeValue("top")}}),D.a.createElement(R.Button,{icon:"alignment-horizontal-center",active:"center"==this.props.value,onClick:function(){return e.onChangeValue("center")}}),D.a.createElement(R.Button,{icon:"alignment-bottom",active:"bottom"==this.props.value,onClick:function(){return e.onChangeValue("bottom")}})))}}]),n}(D.a.Component);function te(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function ne(e){switch(e){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case"a":case"A":return 10;case"b":case"B":return 11;case"c":case"C":return 12;case"d":case"D":return 13;case"e":case"E":return 14;case"f":case"F":return 15;default:return null}}function ae(e){if(9!=e.length)return null;for(var t={r:0,g:0,b:0,a:0},n=1;n<e.length;n++)switch(n){case 1:t.r=16*ne(e[n]);break;case 2:t.r+=ne(e[n]);break;case 3:t.g=16*ne(e[n]);break;case 4:t.g+=ne(e[n]);break;case 5:t.b=16*ne(e[n]);break;case 6:t.b+=ne(e[n]);break;case 7:t.a=16*ne(e[n]);break;case 8:t.a+=ne(e[n])}return t.a/=255,t}function re(e){return"#".concat(te(e.r)).concat(te(e.g)).concat(te(e.b)).concat(te(Math.floor(255*e.a)))}var oe,ie,se={rgbaObjectToHexString:re,interpolate:function(e,t,n){if(null==n)return null;var a=ae(e)||{r:0,g:0,b:0,a:0},r=ae(t)||{r:0,g:0,b:0,a:0};return re({r:Math.floor(a.r+(r.r-a.r)*n),g:Math.floor(a.g+(r.g-a.g)*n),b:Math.floor(a.b+(r.b-a.b)*n),a:a.a+(r.a-a.a)*n})}},le=(n(457),/.*(?:www\.youtube\.com\/(?:(?:watch\?v=)|(?:embed\/))|(?:youtu\.be\/))([a-z0-9\-]+)(?:\?(?:(?:t)|(?:start))=(\d+))?/i),ue=[{match:function(e){return e.match(/image/i)},getDimensions:(ie=d()(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Image;a.addEventListener("load",(function(){e({width:a.naturalWidth,height:a.naturalHeight})})),a.src=t,setTimeout(n,1e4)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return ie.apply(this,arguments)}),getLayer:function(e){return{elementName:"image",config:{url:e,fit:"cover"}}}},{match:function(e){return e.match(/video/i)},getDimensions:(oe=d()(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=document.createElement("video");a.addEventListener("loadeddata",(function(){e({width:a.videoWidth,height:a.videoHeight})}));var r=document.createElement("source");r.src=t,a.appendChild(r),setTimeout(n,1e4)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return oe.apply(this,arguments)}),getLayer:function(e){return{elementName:"video",config:{url:e,fit:"cover"}}}},{match:function(e){return e.match(/audio/i)},getLayer:function(e){return{elementName:"audio",config:{url:e}}}},{match:function(e,t){return e.match(/text\/html/i)&&t&&t.match(le)},getLayer:function(e){var t=e.match(/(?:star)?t=(\d+)/i);return{elementName:"youtube",config:{url:e,start:t&&2==t.length?t[1]:null}}}},{match:function(e){return e.match(/text\/javascript/i)},getLayer:function(e){return{elementName:"script",config:{url:e}}}},{match:function(e){return e.match(/text\/html/i)},getLayer:function(e){var t=e.match(le);return t?{elementName:"youtube",config:{url:e,start:t[2]}}:{elementName:"iframe",config:{url:e}}}}];function ce(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var fe=new(function(e){x()(n,e);var t=de(n);function n(){var e;m()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),O()(v()(e),"_currentUploadId",1),O()(v()(e),"_uploads",[]),O()(v()(e),"handlePasteItems",function(){var t=d()(c.a.mark((function t(n){var a,r,o,s,l,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],r=ce(n),t.prev=2,s=c.a.mark((function t(){var n,r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("text/plain"==(n=o.value).type){t.next=3;break}return t.abrupt("return","continue");case 3:return t.next=5,new Promise((function(e){return n.getAsString(e)}));case 5:if(!(r=t.sent).startsWith("{")){t.next=8;break}return t.abrupt("return",{v:{layers:e.parseJSON(r)}});case 8:r.startsWith("http")&&(i=e.fetchContentType(r).then(function(){var t=d()(c.a.mark((function t(n){var a,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.getContentTypeHandler(n,r)){t.next=4;break}return e.emit("upload-error",{},"Unsupported file type '".concat(n,"'.")),t.abrupt("return");case 4:if(o=a.getLayer(r),!a.getDimensions){t.next=11;break}return t.next=8,a.getDimensions(r);case 8:i=t.sent,o.width=i.width,o.height=i.height;case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.push(i));case 9:case"end":return t.stop()}}),t)})),r.s();case 5:if((o=r.n()).done){t.next=14;break}return t.delegateYield(s(),"t0",7);case 7:if("continue"!==(l=t.t0)){t.next=10;break}return t.abrupt("continue",12);case 10:if("object"!==i()(l)){t.next=12;break}return t.abrupt("return",l.v);case 12:t.next=5;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),r.e(t.t1);case 19:return t.prev=19,r.f(),t.finish(19);case 22:return t.next=24,Promise.all(a);case 24:return u=t.sent,t.abrupt("return",u);case 26:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));return function(e){return t.apply(this,arguments)}}()),O()(v()(e),"handleFileUpload",function(){var t=d()(c.a.mark((function t(n,a){var r,o,i,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],o=ce(n),t.prev=2,s=function(){var t=i.value,n=e.getContentTypeHandler(t.type,null);if(!n)return e.emit("upload-error",t,"".concat(t.name,": Unsupported file type '").concat(t.type,"'.")),"continue";e.emit("upload-started",t);var o=a(t,e.onUploadProgress).then(function(){var a=d()(c.a.mark((function a(r){var o,i,s,l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.emit("upload-finished",t),r){a.next=3;break}throw"Upload result was null.";case 3:if("string"==typeof r?(o=r,i=null):(o=r.url,i=r.dataUri),(s=n.getLayer(o)).name=t.name,!n.getDimensions){a.next=12;break}return a.next=9,n.getDimensions(i||o);case 9:l=a.sent,s.width=l.width,s.height=l.height;case 12:return a.abrupt("return",s);case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(n){e.emit("upload-error",t,n)}));r.push(o)},o.s();case 5:if((i=o.n()).done){t.next=11;break}if("continue"!==s()){t.next=9;break}return t.abrupt("continue",9);case 9:t.next=5;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),o.e(t.t0);case 16:return t.prev=16,o.f(),t.finish(16);case 19:return t.next=21,Promise.all(r);case 21:return l=t.sent,t.abrupt("return",l);case 23:case"end":return t.stop()}}),t,null,[[2,13,16,19]])})));return function(e,n){return t.apply(this,arguments)}}()),O()(v()(e),"handleDataTransfer",function(){var t=d()(c.a.mark((function t(n,a){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.items.length>0)){t.next=4;break}return t.next=3,e.handlePasteItems(n.items);case 3:r=t.sent;case 4:if(!(n.files.length>0)){t.next=8;break}return t.next=7,e.handleFileUpload(n.files,a);case 7:r=t.sent;case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),O()(v()(e),"toBase64",(function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))})),O()(v()(e),"parseJSON",(function(e){var t;try{t=JSON.parse(e)}catch(e){}return t&&"layers"==t.objectType?t.data:[]})),O()(v()(e),"getContentTypeHandler",(function(e,t){return ue.find((function(n){return n.match(e,t)}))})),O()(v()(e),"fetchContentType",function(){var e=d()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.startsWith("http")){e.next=2;break}return e.abrupt("return","text/plain");case 2:if(!/\.png/.test(t)){e.next=6;break}return e.abrupt("return","image/png");case 6:if(!/\.jpe?g$/i.test(t)){e.next=10;break}return e.abrupt("return","image/jpeg");case 10:if(!/\.gif$/i.test(t)){e.next=14;break}return e.abrupt("return","image/gif");case 14:if(!/\.mp4$/i.test(t)){e.next=18;break}return e.abrupt("return","video/mp4");case 18:if(!/\.mov$/i.test(t)){e.next=22;break}return e.abrupt("return","video/mov");case 22:if(!/\.mkv$/i.test(t)){e.next=26;break}return e.abrupt("return","video/mkv");case 26:if(!/\.3gp$/i.test(t)){e.next=30;break}return e.abrupt("return","video/3gpp");case 30:if(!/\.ogv$/i.test(t)){e.next=34;break}return e.abrupt("return","video/ogv");case 34:if(!/\.mp3$/i.test(t)){e.next=38;break}return e.abrupt("return","audio/mpeg");case 38:if(!/\.wav$/i.test(t)){e.next=42;break}return e.abrupt("return","audio/wav");case 42:if(!/\.ogg$/i.test(t)){e.next=46;break}return e.abrupt("return","audio/ogg");case 46:if(!/\.js$/i.test(t)){e.next=48;break}return e.abrupt("return","text/javascript");case 48:return e.prev=48,e.next=51,fetch(t,{method:"HEAD",cache:"no-cache"});case 51:return n=e.sent,e.abrupt("return",n.headers.get("Content-Type"));case 55:return e.prev=55,e.t0=e.catch(48),e.abrupt("return","text/html");case 58:case"end":return e.stop()}}),e,null,[[48,55]])})));return function(t){return e.apply(this,arguments)}}()),O()(v()(e),"onUploadProgress",(function(t,n){e.emit("upload-progress",t,n)})),e}return y()(n,[{key:"uploads",get:function(){return this._uploads}}]),n}(n(459).EventEmitter));function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var be=function(e){x()(n,e);var t=ve(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onStyleChanged",(function(e,t){if(a.props.onParameterValuesChanged){var n={};n[e.name]=t,a.props.onParameterValuesChanged(n)}})),O()(v()(a),"onStyleCommitted",(function(e,t){if(a.props.onParameterValuesChanged){var n={};n[e.name]=t,a.props.onParameterValuesChanged(n,!0)}})),O()(v()(a),"onFontChanged",(function(e,t,n){if(a.props.onParameterValuesChanged){var r={};r[e.name]=t,a.props.onParameterValuesChanged(r,n)}})),O()(v()(a),"onColorChanged",(function(e,t){if(a.props.onParameterValuesChanged){var n={};n[e.name]=se.rgbaObjectToHexString(t.rgb),a.props.onParameterValuesChanged(n,!1)}})),O()(v()(a),"onColorCommitted",(function(e,t){if(a.props.onParameterValuesChanged){var n={};n[e.name]=se.rgbaObjectToHexString(t.rgb),a.props.onParameterValuesChanged(n,!0)}})),O()(v()(a),"onFieldChanged",(function(e){if(a.props.onParameterValuesChanged){var t={};t[e.target.getAttribute("data-param")]=e.target.value,a.props.onParameterValuesChanged(t)}})),O()(v()(a),"onVerticalAlignChanged",(function(e,t){if(a.props.onParameterValuesChanged){var n={};n[e.name]=t,a.props.onParameterValuesChanged(n)}})),O()(v()(a),"onAnimationChanged",(function(e,t,n){if(a.props.onParameterValuesChanged){var r={};r[e.name]=t,a.props.onParameterValuesChanged(r,n)}})),O()(v()(a),"onTextboxFocus",(function(e){a.props.onParameterValuesChanged&&e.target.setAttribute("original-value",e.target.value)})),O()(v()(a),"onTextboxBlur",(function(e){if(a.props.onParameterValuesChanged){var t=e.target.getAttribute("original-value");if(e.target.value!=t){var n={};n[e.target.getAttribute("data-param")]=e.target.value,a.props.onParameterValuesChanged(n,!0)}}})),O()(v()(a),"onRadioGroupChanged",(function(e){if(a.props.onParameterValuesChanged){var t={};t[e.target.getAttribute("data-param")]=e.target.value,a.props.onParameterValuesChanged(t,!0)}})),O()(v()(a),"onButtonGroupChanged",(function(e,t){if(a.props.onParameterValuesChanged){var n={};n[e]=t,a.props.onParameterValuesChanged(n,!0)}})),O()(v()(a),"onSelectChanged",(function(e){if(a.props.onParameterValuesChanged){var t={};t[e.target.getAttribute("data-param")]=e.target.value,a.props.onParameterValuesChanged(t,!0)}})),O()(v()(a),"onCheckboxChanged",(function(e){if(a.props.onParameterValuesChanged){var t={};t[e.target.getAttribute("data-param")]=e.target.checked,a.props.onParameterValuesChanged(t,!0)}})),O()(v()(a),"getOnSliderChangedCallback",(function(e){var t=function(t){if(this.props.onParameterValuesChanged){var n={};n[e]=t,this.props.onParameterValuesChanged(n,!1)}};return t=t.bind(v()(a))})),O()(v()(a),"getOnSliderReleasedCallback",(function(e){var t=function(t){if(this.props.onParameterValuesChanged){var n={};n[e]=t,this.props.onParameterValuesChanged(n,!0)}};return t=t.bind(v()(a))})),O()(v()(a),"onGroupToggle",(function(e){var t=e.target.closest("button");if(t){var n=t.getAttribute("data-group");a.setState((function(e){var t=e.openGroups.indexOf(n);return t>-1?e.openGroups.splice(t,1):e.openGroups.push(n),{openGroups:e.openGroups}}))}})),O()(v()(a),"onAssetUrlDragOver",(function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),O()(v()(a),"onAssetUrlDrop",(function(e){e.preventDefault(),e.stopPropagation();var t=e.target.getAttribute("data-param");a.handleUpload(e.dataTransfer.files,t)})),O()(v()(a),"onUploadClick",(function(e){var t=e.target.closest("button").getAttribute("data-param"),n=document.createElement("input");n.type="file",n.style="display: none",n.accept=e.target.getAttribute("accept"),n.addEventListener("change",(function(e){n.files.length>0&&a.handleUpload(n.files,t)})),n.click()})),O()(v()(a),"handleUpload",function(){var e=d()(c.a.mark((function e(t,n){var r,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.handleFileUpload(t,a.props.onUpload);case 2:1==(r=e.sent).length&&(o=r[0],i=O()({},n,o.config[n]),a.props.onParameterValuesChanged(i,!0));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O()(v()(a),"renderInputGroup",(function(e,t){switch(null==t&&(t=e.defaultValue?e.defaultValue:"slider"==e.type?e.min:"text"==e.type?"":"select"==e.type&&e.options&&e.options.length>0?e.options[0].value?e.options[0].value:e.options[0]:""),e.type){case"font":return D.a.createElement(W,{value:t,onChange:a.onFontChanged,param:e});case"valign":return D.a.createElement(ee,{value:t,param:e,onChange:a.onVerticalAlignChanged});case"color":return D.a.createElement(R.Popover,{boundary:"window"},D.a.createElement(R.Button,{style:{backgroundColor:t},text:""}),D.a.createElement(G.SketchPicker,{color:t,onChange:function(t){return a.onColorChanged(e,t)},onChangeComplete:function(t){return a.onColorCommitted(e,t)}}));case"checkbox":return D.a.createElement(R.Switch,{checked:t,onChange:a.onCheckboxChanged,"data-param":e.name,label:0!=e.compact?e.displayName:null});case"select":var n=e.options;return"function"==typeof n&&(n=a.state.optionsLists[e.name]||[]),D.a.createElement(R.HTMLSelect,{value:t,onChange:a.onSelectChanged,"data-param":e.name,options:n});case"radiogroup":return D.a.createElement(R.RadioGroup,{selectedValue:t,onChange:a.onRadioGroupChanged},e.options.map((function(t){return D.a.createElement(R.Radio,{label:t.label,value:t.value,"data-param":e.name,key:t.value})})));case"buttongroup":return D.a.createElement(R.ButtonGroup,null,e.options.map((function(n){return D.a.createElement(R.Button,{text:n.label,key:n.value,active:t==n.value,onClick:function(){return a.onButtonGroupChanged(e.name,n.value)}})})));case"slider":return D.a.createElement(R.Slider,{value:t,onChange:a.getOnSliderChangedCallback(e.name),onRelease:a.getOnSliderReleasedCallback(e.name),min:e.min||0,max:e.max||100,stepSize:e.step,labelStepSize:e.labelStepSize||(e.max||100)/2});case"animation":return D.a.createElement(X,{value:t,param:e,onChange:a.onAnimationChanged});case"assetUrl":return D.a.createElement(R.InputGroup,{value:t,type:"text",onChange:a.onFieldChanged,onFocus:a.onTextboxFocus,onBlur:a.onTextboxBlur,"data-param":e.name,fill:!0,onDragOver:a.onAssetUrlDragOver,onDrop:a.onAssetUrlDrop,rightElement:D.a.createElement(R.Button,{icon:"cloud-upload",minimal:!0,onClick:a.onUploadClick,"data-param":e.name,accept:e.accept})});case"textarea":return D.a.createElement(R.TextArea,{value:t,onChange:a.onFieldChanged,onFocus:a.onTextboxFocus,onBlur:a.onTextboxBlur,"data-param":e.name,fill:!0,growVertically:!0});case"text":default:return D.a.createElement(R.InputGroup,{value:t,type:e.type,onChange:a.onFieldChanged,onFocus:a.onTextboxFocus,onBlur:a.onTextboxBlur,"data-param":e.name,fill:!0})}})),O()(v()(a),"renderFormGroup",(function(e){var t=null;e.inline&&(t={flexShrink:0,flexGrow:0,flexBasis:e.inline+"%"});var n="checkbox"==e.type&&0!=e.compact?null:e.displayName;return D.a.createElement(R.FormGroup,{key:e.name,label:n,"label-for":e.name,className:"formgroup-"+e.type,style:t},a.renderInputGroup(e,a.props.parameterValues[e.name]))})),a.state={optionsLists:{}},a}return y()(n,[{key:"componentDidMount",value:function(){var e,t=this,n=ye(this.props.parameters);try{var a=function(){var n=e.value;n.options&&"function"==typeof n.options&&Promise.resolve(n.options()).then((function(e){t.setState((function(t){return{optionsLists:he(he({},t.optionsLists),{},O()({},n.name,e))}}))}))};for(n.s();!(e=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}}},{key:"render",value:function(){var e=this,t=(this.props.parameters||[]).map((function(t){return t.group?D.a.createElement(R.FormGroup,{key:t.group},D.a.createElement(q,{label:t.group},t.items.map((function(t){return e.renderFormGroup(t)})))):e.renderFormGroup(t)}));return D.a.createElement("div",{className:"configuration-form"},t)}}]),n}(D.a.Component);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Se=function(e){x()(n,e);var t=xe(n);function n(){var e;m()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),O()(v()(e),"onKeyDown",(function(e){e.stopPropagation()})),e}return y()(n,[{key:"render",value:function(){return D.a.createElement("span",{onKeyDown:this.onKeyDown},this.props.isEditing?D.a.createElement(R.EditableText,this.props):this.props.value)}}]),n}(D.a.Component),Ee="overlayjs/layer",Ce=function(e,t){return!(!e.dataTransfer.types||0==e.dataTransfer.types.length)&&e.dataTransfer.types.includes(t)},we=n(203),ke=n(48);function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Ae=function(e){x()(n,e);var t=Oe(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onMenuItemClick",(function(e,t){a.props.dispatcher.Dispatch("ADD_EFFECT",a.props.layer.id,t)})),O()(v()(a),"renderCategoryMenu",(function(e){return e.map((function(e){var t=ke.b[e];return D.a.createElement(R.MenuItem,{key:e,text:t.displayName,onClick:function(t){return a.onMenuItemClick(t,e)}})}))})),a}return y()(n,[{key:"render",value:function(){var e=this;return D.a.createElement(R.Popover,{position:we.a.RIGHT_BOTTOM,interactionKind:R.PopoverInteractionKind.CLICK,boundary:"window",fill:!0},this.props.children,D.a.createElement(R.Menu,null,Object.entries(ke.a).map((function(t){return D.a.createElement(R.MenuItem,{key:t[0],text:t[0],popoverProps:{openOnTargetFocus:!1}},e.renderCategoryMenu(t[1]))}))))}}]),n}(D.a.PureComponent);n(460);function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Re=function(e){x()(n,e);var t=De(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onParameterValuesChanged",(function(e,t){_.Dispatch("UPDATE_EFFECT",a.props.layer.id,a.props.effectName,e,t)})),O()(v()(a),"onDeleteClick",(function(){_.Dispatch("DELETE_EFFECT",a.props.layer.id,a.props.effectName)})),a}return y()(n,[{key:"render",value:function(){return D.a.createElement("div",{className:"effect-item"},D.a.createElement("div",{className:"effect-name"},this.props.effect.displayName,D.a.createElement("div",{className:"buttons"},D.a.createElement(R.AnchorButton,{minimal:!0,icon:"trash",onClick:this.onDeleteClick}))),D.a.createElement(be,{parameters:this.props.effect.parameters,parameterValues:this.props.config,onParameterValuesChanged:this.onParameterValuesChanged}))}}]),n}(D.a.PureComponent),Te=function(e){x()(n,e);var t=De(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onEditLayerName",(function(e){e==a.props.layer.id&&a.setState({isEditingLabel:!0})})),O()(v()(a),"onConfigFormParameterValuesChanged",(function(e,t){_.Dispatch("UPDATE_LAYER_CONFIG",a.props.layer.id,{config:e},t)})),O()(v()(a),"onLayerLabelChanged",(function(e){_.Dispatch("UPDATE_LAYER_CONFIG",a.props.layer.id,{label:e},!0)})),O()(v()(a),"onToggleVisibility",(function(e){_.Dispatch("UPDATE_LAYER_CONFIG",a.props.layer.id,{hidden:!a.props.layer.hidden},!0)})),O()(v()(a),"onDelete",(function(){_.Dispatch("DELETE_LAYERS",[a.props.layer.id])})),O()(v()(a),"onCollapsableToggled",(function(e){_.Dispatch("SELECT_LAYER",a.props.layer.id)})),O()(v()(a),"onDragStart",(function(e){a.props.onDragStart?a.props.onDragStart(e,a.props.layer.id):e.preventDefault()})),a.state={isEditingLabel:!1},a}return y()(n,[{key:"componentDidMount",value:function(){_.Register("EDIT_LAYER_NAME",this.onEditLayerName)}},{key:"componentWillUnmount",value:function(){_.Unregister("EDIT_LAYER_NAME",this.onEditLayerName)}},{key:"render",value:function(){var e=this,t=D.a.createElement("span",{className:"layer-label"},D.a.createElement(Se,{selectAllOnFocus:!0,value:this.props.layer.label,onChange:this.onLayerLabelChanged,isEditing:this.state.isEditingLabel,onConfirm:function(){return e.setState({isEditingLabel:!1})},onCancel:function(){return e.setState({isEditingLabel:!1})}})),n=D.a.createElement(R.Button,{icon:"eye-open",intent:this.props.layer.hidden?M.a.DANGER:M.a.SUCCESS,title:"Toggle Visibility",onClick:this.onToggleVisibility}),a=D.a.createElement(D.a.Fragment,null,D.a.createElement(R.Button,{icon:"edit",title:"Edit Label",onClick:function(t){e.setState({isEditingLabel:!0})}}),D.a.createElement(R.Button,{icon:"trash",title:"Delete",onClick:this.onDelete})),o=null;null!=this.props.element.manifest.parameters&&this.props.element.manifest.parameters.length>0&&(o=D.a.createElement(be,{parameters:this.props.element.manifest.parameters,parameterValues:this.props.layer.config,onUpload:this.props.onUpload,onParameterValuesChanged:this.onConfigFormParameterValuesChanged}));var i,s=[];if(this.props.layer.effects)for(var l=0,u=Object.entries(this.props.layer.effects);l<u.length;l++){var c=r()(u[l],2),p=c[0],d=c[1],f=ke.b[p];f&&"animation"!=f.type&&s.push(D.a.createElement(Re,{key:p,dispatcher:_,layer:this.props.layer,effectName:p,effect:f,config:d}))}return this.props.element.manifest.nonVisual||(i=D.a.createElement(Ae,{dispatcher:_,layer:this.props.layer},D.a.createElement(R.Button,{minimal:!0,fill:!0,alignText:"left",icon:"plus",className:"btn-add-effect",text:"Add Property"}))),D.a.createElement("div",{className:"layer "+(this.props.isDragging?"is-dragging":null),"data-index":this.props.index},D.a.createElement(j,{label:t,leftButtons:n,rightButtons:a,onToggle:this.onCollapsableToggled,islocked:this.state.isEditingLabel,intent:this.props.isSelected?M.a.PRIMARY:null,disabled:this.props.layer.hidden,active:this.props.isDragging,draggable:!0,onDragStart:this.onDragStart,collapsed:this.props.collapsed},o,s,i))}}]),n}(D.a.Component),Pe=function(e){x()(n,e);var t=De(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onLayerDragStart",(function(e,t){if("INPUT"!=e.target.name){window.addEventListener("dragend",a.onLayerDragEnd),e.dataTransfer.setData(Ee,t);var n=a.props.layers.findIndex((function(e){return e.id==t}));a.setState({draggedLayerIndex:n,draggedLayerId:t})}else e.preventDefault()})),O()(v()(a),"onLayerDragEnd",(function(e,t){window.removeEventListener("dragend",a.onLayerDragEnd),a.setState({draggedLayerIndex:null,draggedLayerId:null})})),O()(v()(a),"onDragOver",(function(e){if(Ce(e,Ee))if(e.preventDefault(),e.dataTransfer.dropEffect="move",e.target.matches(".layer-list-layers"))a.state.draggedLayerIndex!=a.props.layers.length&&a.setState({draggedLayerIndex:a.props.layers.length});else{var t=e.target.closest(".layer");if(t){if(t.matches(".is-dragging"))return;var n=parseInt(t.getAttribute("data-index")),r=t.getBoundingClientRect(),o=e.nativeEvent.clientY>r.top+r.height/2?n+1:n;a.state.draggedLayerIndex!=o&&a.setState({draggedLayerIndex:o})}}})),O()(v()(a),"onDrop",(function(e){if(e.preventDefault(),Ce(e,Ee)){var t=parseInt(e.dataTransfer.getData(Ee));_.Dispatch("MOVE_LAYER",t,a.state.draggedLayerIndex),a.setState({draggedLayerIndex:null,draggedLayerId:null})}})),a.state={draggedLayerIndex:null,draggedLayerId:null},a}return y()(n,[{key:"renderDraggedLayer",value:function(){var e=this;if(null==this.state.draggedLayerId)return null;var t=this.props.layers.find((function(t){return t.id==e.state.draggedLayerId})),n=this.props.elements[t.elementName];return D.a.createElement(Te,{key:t.id,index:this.state.draggedLayerIndex,dispatcher:_,layer:t,element:n,isSelected:!1,isDragging:!0,collapsed:!0})}},{key:"render",value:function(){var e=this,t=[];return this.props.layers.forEach((function(n,a){var r=e.props.elements[n.elementName];if(!r)return null;a==e.state.draggedLayerIndex&&t.push(e.renderDraggedLayer()),n.id!=e.state.draggedLayerId&&t.push(D.a.createElement(Te,{key:n.id,index:a,dispatcher:_,layer:n,element:r,isSelected:e.props.selectedLayerIds.includes(n.id),onDragStart:e.onLayerDragStart,onDragEnd:e.onLayerDragEnd,onUpload:e.props.onUpload,collapsed:null!=e.state.draggedLayerId||void 0,animationTime:e.props.animationTime}))})),this.state.draggedLayerIndex==this.props.layers.length&&t.push(this.renderDraggedLayer()),D.a.createElement("div",{className:"layer-list-layers",onDragOver:this.onDragOver,onDrop:this.onDrop},t)}}]),n}(D.a.Component);n(462);function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var _e=function(e){x()(n,e);var t=Le(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onZoomDropDownChanged",(function(e){if(a.props.onZoomChanged){var t=e.target.value;a.props.onZoomChanged(t)}})),a}return y()(n,[{key:"render",value:function(){var e=this,t=n.ZOOM_OPTIONS.map((function(t){return t.isAutoFit?{label:"Fit (".concat(Math.round(100*e.props.autoFitZoom),"%)"),value:n.ZOOM_AUTOFIT_VALUE}:{label:Math.round(100*t.value)+"%",value:t.value}}));return!(this.props.zoom==this.props.autoFitZoom||n.ZOOM_OPTIONS.findIndex((function(t){return t.value==e.props.zoom}))>-1)&&t.unshift({label:"Custom (".concat(Math.round(100*this.props.zoom),"%)"),value:this.props.zoom}),D.a.createElement("div",{className:"zoom-selector"},D.a.createElement(R.HTMLSelect,{onChange:this.onZoomDropDownChanged,options:t,value:this.props.zoom}))}}]),n}(D.a.Component);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}O()(_e,"ZOOM_AUTOFIT_VALUE",-9999),O()(_e,"ZOOM_OPTIONS",[{text:"Fit",value:_e.ZOOM_AUTOFIT_VALUE,isAutoFit:!0},{text:"100%",value:1},{text:"67%",value:.666666667},{text:"50%",value:.5},{text:"25%",value:.25}]);var Ie=function(e){x()(n,e);var t=Ne(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onSelectBackground",(function(e){a.props.onBackgroundImageChanged(e)})),a}return y()(n,[{key:"render",value:function(){var e=this;return this.props.backgroundImages?D.a.createElement(R.Popover,{position:"bottom-right"},D.a.createElement(R.Button,{text:this.props.backgroundImage||"No Background",rightIcon:"caret-down"}),D.a.createElement(R.Menu,null,D.a.createElement(R.MenuItem,{key:"none",onClick:function(){return e.onSelectBackground(null)},text:"No Background"}),Object.keys(this.props.backgroundImages).map((function(t){return D.a.createElement(R.MenuItem,{key:t,onClick:function(){return e.onSelectBackground(t)},text:t})})))):null}}]),n}(D.a.PureComponent);n(464);function Me(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Be=function(e){x()(n,e);var t=Ve(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"_containerRef",void 0),O()(v()(a),"_stageContainer",void 0),O()(v()(a),"_stage",void 0),O()(v()(a),"_container",void 0),O()(v()(a),"screenToStageCoordinates",(function(e){var t=a._stage.getBoundingClientRect();return{top:(e.top-t.top)/a.props.zoom,left:(e.left-t.left)/a.props.zoom,height:e.height?e.height/a.props.zoom:0,width:e.width?e.width/a.props.zoom:0}})),O()(v()(a),"stageToScreenCoordinates",(function(e){var t=a._stage.parentNode.getBoundingClientRect();return{top:(e.top-a.props.stageHeight/2+a.props.panning.y)*a.props.zoom+t.height/2,left:(e.left-a.props.stageWidth/2+a.props.panning.x)*a.props.zoom+t.width/2,height:e.height?e.height*a.props.zoom:0,width:e.width?e.width*a.props.zoom:0,transform:e.rotation?"rotate(".concat(e.rotation,"deg)"):null}})),O()(v()(a),"onContainerMouseDown",(function(e){if(1==e.buttons){var t=a.screenToStageCoordinates({top:e.clientY,left:e.clientX}),r=e.target.getAttribute("data-edge");window.addEventListener("mousemove",a.onMouseMove),window.addEventListener("mouseup",a.onMouseUp);var o,i,s=e.target.getAttribute("data-cursor");a._containerRef.current.style.cursor=s,r?"center"==r?o=n.GUTTER_STATE_MOVE:((o={}).top="nw"==r||"n"==r||"ne"==r,o.left="nw"==r||"w"==r||"sw"==r,o.right="ne"==r||"e"==r||"se"==r,o.bottom="sw"==r||"s"==r||"se"==r):o=n.GUTTER_STATE_BOXSELECT,i=r?{top:a.props.boundingBox.top,left:a.props.boundingBox.left,height:a.props.boundingBox.height,width:a.props.boundingBox.width}:{top:t.top,left:t.left,height:0,width:0},a.setState({hasMoved:!1,dragOrigin:{gutterState:o,left:t.left,top:t.top,rect:i,originalSelectedRects:l()(a.props.selectedRects)},lastRect:i})}})),O()(v()(a),"onMouseMove",(function(e){var t=a.screenToStageCoordinates({top:e.clientY,left:e.clientX}),r=t.left-a.state.dragOrigin.left,o=t.top-a.state.dragOrigin.top,i=Object.assign({},a.state.dragOrigin.rect),s=a.state.dragOrigin.gutterState;if(s==n.GUTTER_STATE_BOXSELECT)o<0&&(i.top=a.state.dragOrigin.top+o,o*=-1),r<0&&(i.left=a.state.dragOrigin.left+r,r*=-1),i.height=o,i.width=r;else if(s==n.GUTTER_STATE_MOVE)e.ctrlKey?Math.abs(r/o)>1?i.left+=r:i.top+=o:(i.left+=r,i.top+=o);else{var l=-i.height/i.width,u=a.props.preserveAspect;if(e.ctrlKey&&(u=!u),(s.top||s.bottom)&&(s.left||s.right)&&u){var c;c=s.bottom?s.left?(-i.height-o)/(i.width-r):(-i.height-o)/(-i.width-r):s.left?(i.height-o)/(i.width-r):(i.height-o)/(-i.width-r);s.top&&s.left||s.bottom&&s.right?c<-l?o=r*-l:r=o/-l:c>l?o=r*l:r=o/l}s.top&&(i.height-o<0?(i.top=i.top+i.height-1,i.height=1):(i.top+=o,i.height=i.height-o)),s.bottom&&(i.height=Math.max(1,i.height+o)),s.left&&(i.width-r<0?(i.left=i.left+i.width,i.width=1):(i.left+=r,i.width=i.width-r)),s.right&&(i.width=Math.max(1,i.width+r))}a.setState({hasMoved:0!=r||0!=o,lastRect:i}),s!=n.GUTTER_STATE_BOXSELECT&&a.emitChangeEvents(i,!1)})),O()(v()(a),"onMouseUp",(function(e){a.state.hasMoved?a.state.dragOrigin.gutterState==n.GUTTER_STATE_BOXSELECT?a.props.onSelectAtCoords(a.state.lastRect.left,a.state.lastRect.top,a.state.lastRect.left+a.state.lastRect.width,a.state.lastRect.top+a.state.lastRect.height,e.ctrlKey):a.emitChangeEvents(a.state.lastRect,!0):a.props.onSelectAtCoords(a.state.dragOrigin.left,a.state.dragOrigin.top,a.state.dragOrigin.left,a.state.dragOrigin.top,e.ctrlKey);window.removeEventListener("mousemove",a.onMouseMove),window.removeEventListener("mouseup",a.onMouseUp),a._containerRef.current.style.cursor="",a.setState({hasMoved:!1,boxSelectRect:null,dragOrigin:null,lastRect:null})})),a._containerRef=D.a.createRef(),a.state={hasMoved:!1,dragOrigin:null,lastRect:null},a}return y()(n,[{key:"componentDidMount",value:function(){this._stage=this._containerRef.current.parentNode.querySelector(".stage"),this._containerRef.current.addEventListener("mousedown",this.onContainerMouseDown)}},{key:"emitChangeEvents",value:function(e,t){if(1==this.props.selectedRects.length)this.props.onSelectedRectChanged(this.props.selectedRects[0].id,e,t);else{var n,a=this.state.dragOrigin.rect,r={top:e.top/a.top,left:e.left/a.left,width:e.width/a.width,height:e.height/a.height},o=Me(this.state.dragOrigin.originalSelectedRects);try{for(o.s();!(n=o.n()).done;){var i=n.value,s={top:e.top+(i.top-a.top)*r.height,left:e.left+(i.left-a.left)*r.width,width:i.width*r.width,height:i.height*r.height};this.props.onSelectedRectChanged(i.id,s,t)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"renderSelectorBoxes",value:function(){var e=[];if(null!=this.state.dragOrigin&&this.state.dragOrigin.gutterState==n.GUTTER_STATE_BOXSELECT&&e.push(D.a.createElement("div",{className:"resizer-selector-box",style:this.stageToScreenCoordinates(this.state.lastRect),key:"-2"})),this.props.boundingBox&&e.push(D.a.createElement("div",{className:"resizer-selector",style:this.stageToScreenCoordinates(this.props.boundingBox),key:"-1"},D.a.createElement("div",{className:"resize-handle resize-handle-nw","data-edge":"nw"}),D.a.createElement("div",{className:"resize-handle resize-handle-n","data-edge":"n"}),D.a.createElement("div",{className:"resize-handle resize-handle-ne","data-edge":"ne"}),D.a.createElement("div",{className:"resize-handle resize-handle-e","data-edge":"e"}),D.a.createElement("div",{className:"resize-handle resize-handle-se","data-edge":"se"}),D.a.createElement("div",{className:"resize-handle resize-handle-s","data-edge":"s"}),D.a.createElement("div",{className:"resize-handle resize-handle-sw","data-edge":"sw"}),D.a.createElement("div",{className:"resize-handle resize-handle-w","data-edge":"w"}),D.a.createElement("div",{className:"resize-handle resize-handle-center","data-edge":"center"}))),this.props.selectedRects.length>0){var t,a=Me(this.props.selectedRects);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.push(D.a.createElement("div",{className:"resizer-subrect",style:this.stageToScreenCoordinates(r),key:r.id}))}}catch(e){a.e(e)}finally{a.f()}}return e}},{key:"render",value:function(){return D.a.createElement("div",{className:"resizer-container",ref:this._containerRef},this.renderSelectorBoxes())}}]),n}(D.a.Component);O()(Be,"GUTTER_STATE_MOVE",{top:!0,left:!0,bottom:!0,right:!0}),O()(Be,"GUTTER_STATE_BOXSELECT",{top:!1,left:!1,bottom:!1,right:!1});n(466);function Ue(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Ge=function(e){x()(n,e);var t=je(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"_stageContainerRef",void 0),O()(v()(a),"_zoomContainerRef",void 0),O()(v()(a),"_bodyDrag",void 0),O()(v()(a),"onWheel",(function(e){var t=-e.deltaY/100,n=a.getZoomValue();n=t<0?n/(1+.1*-t):n*(1+.1*t),a.onZoomChanged(n)})),O()(v()(a),"onKeyDown",(function(e){"0"==e.key&&e.ctrlKey&&a.onZoomChanged(_e.ZOOM_AUTOFIT_VALUE)})),O()(v()(a),"onContextMenu",(function(e){e.stopPropagation(),e.preventDefault()})),O()(v()(a),"onMouseDown",(function(e){var t=e.target.closest(".layer-container");if(t){var n=parseInt(t.getAttribute("data-id"));_.Dispatch("SELECT_LAYER",n)}else 2==(2&e.buttons)&&(a._bodyDrag={sourceX:e.clientX,sourceY:e.clientY,basePanning:Object.assign({},a.state.panning)})})),O()(v()(a),"onBodyMouseUp",(function(e){a._bodyDrag&&(a._bodyDrag=null)})),O()(v()(a),"onBodyMouseMove",(function(e){if(a._bodyDrag){var t=a.getZoomValue();a.setPanning(a._bodyDrag.basePanning.x+(e.clientX-a._bodyDrag.sourceX)/t,a._bodyDrag.basePanning.y+(e.clientY-a._bodyDrag.sourceY)/t)}})),O()(v()(a),"onWindowResized",(function(e){a.updateAutoFit()})),O()(v()(a),"updateAutoFit",(function(){if(a._stageContainerRef.current){var e=a._stageContainerRef.current.getBoundingClientRect();if(e.height>0&&e.width>0){var t,n=a.props.stageHeight/a.props.stageWidth;t=e.height/e.width<n?e.height/a.props.stageHeight:e.width/a.props.stageWidth,a.state.autoFitZoom!=t&&a.setState({autoFitZoom:t})}}})),O()(v()(a),"onZoomChanged",(function(e){a.setState((function(t){return{zoom:e,panning:e==_e.ZOOM_AUTOFIT_VALUE?{x:0,y:0}:t.panning}}))})),O()(v()(a),"setPanning",(function(e,t){a.setState({panning:{x:e,y:t}})})),O()(v()(a),"onSelectedRectChanged",(function(e,t,n){_.Dispatch("UPDATE_LAYER_CONFIG",e,t,n)})),O()(v()(a),"onSetResizeCursor",(function(e){a._stageContainerRef.current.style.cursor=e})),O()(v()(a),"onSelectAtCoords",(function(e,t,n,r,o){if(n==e||r==t){var i=a.props.layers.filter((function(n){var r=a.props.elements[n.elementName];return r&&!r.manifest.nonVisual&&t>n.top&&e>n.left&&t<n.top+n.height&&e<n.left+n.width}));if(0==i.length)return void _.Dispatch("SELECT_LAYER",null);if(0==a.props.selectedLayerIds.length)return void _.Dispatch("SELECT_LAYER",i[0].id,o);if(1==i.length||o)return void _.Dispatch("SELECT_LAYER",i[0].id,o);var s=i.findIndex((function(e){return a.props.selectedLayerIds.includes(e.id)}));if(-1==s)return void _.Dispatch("SELECT_LAYER",i[0].id,o);s=(s+1)%i.length,_.Dispatch("SELECT_LAYER",i[s].id,o)}else{var l=a.props.layers.filter((function(o){var i=a.props.elements[o.elementName];return i&&!i.manifest.nonVisual&&t<o.top&&e<o.left&&r>o.top+o.height&&n>o.left+o.width}));o||_.Dispatch("SELECT_LAYER",null,!1);var u,c=Ue(l);try{for(c.s();!(u=c.n()).done;){var p=u.value;_.Dispatch("SELECT_LAYER",p.id,!0)}}catch(e){c.e(e)}finally{c.f()}}})),O()(v()(a),"onBackgroundImageChanged",(function(e){a.setState({backgroundImage:e})})),a._stageContainerRef=D.a.createRef(),a._zoomContainerRef=D.a.createRef(),a.state={zoom:_e.ZOOM_AUTOFIT_VALUE,autoFitZoom:1,panning:{x:0,y:0},backgroundImage:null},a}return y()(n,[{key:"componentDidMount",value:function(){this._stageContainerRef.current.addEventListener("wheel",this.onWheel),this._stageContainerRef.current.addEventListener("mousedown",this.onMouseDown),this._stageContainerRef.current.addEventListener("contextmenu",this.onContextMenu),document.body.addEventListener("mouseup",this.onBodyMouseUp),document.body.addEventListener("mousemove",this.onBodyMouseMove),document.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onWindowResized),this._zoomContainerRef.current.addEventListener("mousedown",(function(e){e.stopPropagation()})),this.updateAutoFit()}},{key:"getZoomValue",value:function(){return this.state.zoom==_e.ZOOM_AUTOFIT_VALUE?this.state.autoFitZoom:this.state.zoom}},{key:"render",value:function(){var e,t=this,n=!0,a=[],r=Ue(this.props.selectedLayerIds);try{var o=function(){var r=e.value,o=t.props.layers.find((function(e){return e.id==r}));if(!o)return"continue";var i=t.props.elements[o.elementName];if(i.manifest.nonVisual)return"continue";!i.manifest.preserveAspect&&n&&(n=!1),a.push({id:r,top:o.top,left:o.left,height:o.height,width:o.width,right:o.left+o.width,bottom:o.top+o.height,rotation:o.rotation})};for(r.s();!(e=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}for(var i,s=null,l=0,u=a;l<u.length;l++){var c=u[l];s||(s={}),(null==s.top||s.top>c.top)&&(s.top=c.top),(null==s.left||s.left>c.left)&&(s.left=c.left),(null==s.right||s.right<c.right)&&(s.right=c.right),(null==s.bottom||s.bottom<c.bottom)&&(s.bottom=c.bottom)}s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),this.props.backgroundImages&&this.state.backgroundImage&&(i=this.props.backgroundImages[this.state.backgroundImage]);var p=this.getZoomValue(),d={width:this.props.stageWidth+"px",height:this.props.stageHeight+"px",transform:"scale(".concat(p,") translate(").concat(this.state.panning.x,"px, ").concat(this.state.panning.y,"px)"),backgroundImage:i?"url(".concat(i,")"):null};return D.a.createElement("div",{className:"stage-container",ref:this._stageContainerRef},D.a.createElement("div",{className:"stage-view-container",ref:this._zoomContainerRef},D.a.createElement(_e,{zoom:this.state.zoom,autoFitZoom:this.state.autoFitZoom,onZoomChanged:this.onZoomChanged}),D.a.createElement(Ie,{backgroundImages:this.props.backgroundImages,backgroundImage:this.state.backgroundImage,onBackgroundImageChanged:this.onBackgroundImageChanged})),D.a.createElement("div",{className:"stage",style:d},this.props.children),this.props.hideResizer?null:D.a.createElement(Be,{handleSize:10,boundingBox:s,selectedRects:a,stageWidth:this.props.stageWidth,stageHeight:this.props.stageHeight,preserveAspect:n,zoom:p,panning:this.state.panning,onSelectedRectChanged:this.onSelectedRectChanged,onSetCursor:this.onSetResizeCursor,onSelectAtCoords:this.onSelectAtCoords}))}}]),n}(D.a.Component);O()(Ge,"RESIZE_HANDLE_SIZE",10);var Ke=n(76);n(468);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var We=function(e){x()(n,e);var t=He(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onParameterValuesChanged",(function(e,t){a.props.onConfigChanged&&a.props.onConfigChanged(a.props.name,e,t)})),O()(v()(a),"onDeleteClick",(function(){a.props.onDelete&&a.props.onDelete(a.props.name)})),a}return y()(n,[{key:"render",value:function(){return this.props.effect?D.a.createElement("div",{className:"layer-animation-item"},D.a.createElement("div",{className:"effect-name"},this.props.effect.displayName,D.a.createElement("div",{className:"buttons"},D.a.createElement(R.AnchorButton,{minimal:!0,icon:"trash",onClick:this.onDeleteClick}))),D.a.createElement(be,{parameters:this.props.effect.parameters,parameterValues:this.props.config,onParameterValuesChanged:this.onParameterValuesChanged})):D.a.createElement("div",null,"Effect ",this.props.name," not found")}}]),n}(D.a.PureComponent),Ye=function(e){x()(n,e);var t=He(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"getEffectName",(function(){return a.props.effectList&&0!=a.props.effectList.length?1==a.props.effectList.length?a.props.effectList[0].effect.displayName:"(".concat(a.props.effectList.length," effects)"):" "})),O()(v()(a),"onPopoverInteraction",(function(e){a.props.onOpenToggled&&a.props.onOpenToggled(e)})),a}return y()(n,[{key:"render",value:function(){var e=this;return D.a.createElement(R.FormGroup,{label:this.props.label,inline:!0},D.a.createElement(R.ButtonGroup,null,D.a.createElement(R.Button,{icon:this.props.isPlaying?"stop":"play",intent:this.props.isPlaying?"danger":"none",onClick:this.props.isPlaying?this.props.onPause:this.props.onPlay}),D.a.createElement(R.Popover,{disabled:this.props.disabled||!this.props.effectList||0==this.props.effectList.length,isOpen:this.props.isOpen,onInteraction:this.onPopoverInteraction,enforceFocus:!1,usePortal:!1,autoFocus:!1},D.a.createElement(R.Button,{disabled:this.props.disabled,className:"effect-list-button"},this.getEffectName()),D.a.createElement("div",{className:"layer-animation-list"},this.props.disabled||!this.props.effectList?null:this.props.effectList.map((function(t){return D.a.createElement(We,{key:t.name,name:t.name,effect:t.effect,config:t.config,onConfigChanged:e.props.onEffectConfigChanged,onDelete:e.props.onEffectDeleted})})))),D.a.createElement(R.Popover,{position:"bottom",disabled:this.props.disabled,boundary:"window"},D.a.createElement(R.Button,{disabled:this.props.disabled,icon:"plus"}),D.a.createElement(R.Menu,null,this.props.availableEffects.map((function(t){var n=ke.b[t];return D.a.createElement(R.MenuItem,{key:t,text:n.displayName,onClick:function(n){return e.props.onEffectAdded(t)}})}))))))}}]),n}(D.a.PureComponent),Ze=function(e){x()(n,e);var t=He(n);function n(e){var a;m()(this,n),a=t.call(this,e),O()(v()(a),"onFieldChanged",(function(e){var t=e.target.getAttribute("data-param"),n=e.target.value;a.updateParameter(t,n,!1)})),O()(v()(a),"onFieldFocused",(function(e){a.setState({isChanging:!0}),e.target.setAttribute("last-value",e.target.value)})),O()(v()(a),"onFieldBlurred",(function(e){a.setState({isChanging:!1});var t=e.target.getAttribute("data-param"),n=e.target.value,r=e.target.getAttribute("last-value"),o=n.match(/^\-?\d+\.?\d*$/);a.updateParameter(t,o?parseFloat(n):r,!0)})),O()(v()(a),"onEffectConfigChanged",(function(e,t,n){_.Dispatch("UPDATE_EFFECT",a.state.selectedLayerId,e,t,n)})),O()(v()(a),"onEffectDeleted",(function(e){_.Dispatch("DELETE_EFFECT",a.state.selectedLayerId,e)})),O()(v()(a),"onEffectAdded",(function(e,t){_.Dispatch("ADD_EFFECT",a.state.selectedLayerId,e),a.setState({openEffectList:t})})),O()(v()(a),"onEffectListOpenToggled",(function(e,t){t?a.setState({openEffectList:e}):a.setState({openEffectList:null})}));var r=(1==e.selectedLayerIds.length?e.layers.find((function(t){return t.id==e.selectedLayerIds[0]})):{})||{};return a.state={disabled:1!=e.selectedLayerIds.length||r.nonVisual,selectedLayerId:r.id,top:r.top,left:r.left,width:r.width,height:r.height,rotation:r.rotation,effects:r.effects},a}return y()(n,[{key:"updateParameter",value:function(e,t,n){var a={};return a[e]=t,_.Dispatch("UPDATE_LAYER_CONFIG",this.state.selectedLayerId,a,n),!0}},{key:"render",value:function(){var e=this,t=this.state.disabled?"":this.state.left||"0",n=this.state.disabled?"":this.state.top||"0",a=this.state.disabled?"":this.state.width||"0",r=this.state.disabled?"":this.state.height||"0",o=this.state.disabled?"":this.state.rotation||"0";return D.a.createElement("div",{className:"active-layer-editor"},D.a.createElement(Ye,{label:"Entry",availableEffects:ke.c,effectList:this.state.entryEffects,disabled:this.state.disabled,isOpen:"entry"==this.state.openEffectList,isPlaying:"entering"==this.props.rendererPhase,onOpenToggled:function(t){return e.onEffectListOpenToggled("entry",t)},onEffectConfigChanged:this.onEffectConfigChanged,onEffectDeleted:this.onEffectDeleted,onEffectAdded:function(t){return e.onEffectAdded(t,"entry")},onPlay:function(){return e.props.onSetRendererPhase("entering")},onPause:function(){return e.props.onSetRendererPhase("static")}}),D.a.createElement(Ye,{label:"Exit",availableEffects:ke.d,effectList:this.state.exitEffects,disabled:this.state.disabled,isOpen:"exit"==this.state.openEffectList,isPlaying:"exiting"==this.props.rendererPhase,onOpenToggled:function(t){return e.onEffectListOpenToggled("exit",t)},onEffectConfigChanged:this.onEffectConfigChanged,onEffectDeleted:this.onEffectDeleted,onEffectAdded:function(t){return e.onEffectAdded(t,"exit")},onPlay:function(){return e.props.onSetRendererPhase("exiting")},onPause:function(){return e.props.onSetRendererPhase("static")}}),D.a.createElement(Ye,{label:"Standard",availableEffects:ke.e,effectList:this.state.standardEffects,disabled:this.state.disabled,isOpen:"standard"==this.state.openEffectList,isPlaying:"visible"==this.props.rendererPhase,onOpenToggled:function(t){return e.onEffectListOpenToggled("standard",t)},onEffectConfigChanged:this.onEffectConfigChanged,onEffectDeleted:this.onEffectDeleted,onEffectAdded:function(t){return e.onEffectAdded(t,"exit")},onPlay:function(){return e.props.onSetRendererPhase("visible")},onPause:function(){return e.props.onSetRendererPhase("static")}}),D.a.createElement("div",{className:"layer-coordinate-inputs"},D.a.createElement(R.ControlGroup,null,D.a.createElement(R.FormGroup,{label:"X",inline:!0},D.a.createElement(R.InputGroup,{value:t,onChange:this.onFieldChanged,onFocus:this.onFieldFocused,onBlur:this.onFieldBlurred,"data-param":"left",readOnly:this.state.disabled})),D.a.createElement(R.FormGroup,{label:"Y",inline:!0},D.a.createElement(R.InputGroup,{value:n,onChange:this.onFieldChanged,onFocus:this.onFieldFocused,onBlur:this.onFieldBlurred,"data-param":"top",readOnly:this.state.disabled})),D.a.createElement(R.FormGroup,{label:"W",inline:!0},D.a.createElement(R.InputGroup,{value:a,onChange:this.onFieldChanged,onFocus:this.onFieldFocused,onBlur:this.onFieldBlurred,"data-param":"width",readOnly:this.state.disabled})),D.a.createElement(R.FormGroup,{label:"H",inline:!0},D.a.createElement(R.InputGroup,{value:r,onChange:this.onFieldChanged,onFocus:this.onFieldFocused,onBlur:this.onFieldBlurred,"data-param":"height",readOnly:this.state.disabled})),D.a.createElement(R.FormGroup,{label:"R",inline:!0},D.a.createElement(R.InputGroup,{value:o,onChange:this.onFieldChanged,onFocus:this.onFieldFocused,onBlur:this.onFieldBlurred,"data-param":"rotation",readOnly:this.state.disabled})))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(1==e.selectedLayerIds.length){var n=e.selectedLayerIds[0],a=e.layers.find((function(e){return e.id==n}));if(a){var o=e.elements[a.elementName];if(o&&!o.manifest.nonVisual){var i=!1,s={};if(1==t.disabled&&(s.disabled=!1,i=!0),n!==t.selectedLayerId&&(s.selectedLayerId=n,i=!0),a.top!==t.top&&(s.top=a.top,i=!0),a.left!==t.left&&(s.left=a.left,i=!0),a.width!==t.width&&(s.width=a.width,i=!0),a.height!==t.height&&(s.height=a.height,i=!0),a.rotation!==t.rotation&&(s.rotation=a.rotation,i=!0),a.effects!==t.effects){if(s.effects=a.effects,s.entryEffects=[],s.exitEffects=[],s.standardEffects=[],a.effects)for(var l=0,u=Object.entries(a.effects);l<u.length;l++){var c=r()(u[l],2),p=c[0],d=c[1],f=ke.b[p];f&&("entrance"==f.animationType&&s.entryEffects.push({name:p,effect:f,config:d}),"exit"==f.animationType&&s.exitEffects.push({name:p,effect:f,config:d}),"standard"==f.animationType&&s.standardEffects.push({name:p,effect:f,config:d}))}i=!0}return i?s:null}}}return{disabled:!0,selectedLayerId:null,top:"",left:"",width:"",height:"",rotation:"",effects:null,entryEffects:null,exitEffects:null,standardEffects:null,openEffectList:null}}}]),n}(D.a.Component);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var qe=function(e){x()(n,e);var t=$e(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onShowToast",(function(e){a.setState((function(t){var n=l()(t.toasts);if(e.id){var a=n.findIndex((function(t){return t.id==e.id}));if(a>-1)return n[a]=Xe(Xe({},n[a]),e),{toasts:n}}return n.push(e),{toasts:n}}))})),O()(v()(a),"onDismiss",(function(e){e.onCancel&&e.onCancel(),a.setState((function(t){var n=l()(t.toasts),a=n.indexOf(e);if(-1!=a)return n.splice(a,1),{toasts:n}}))})),a.state={toasts:[]},a}return y()(n,[{key:"componentDidMount",value:function(){_.Register("SHOW_TOAST",this.onShowToast)}},{key:"componentWillUnmount",value:function(){_.Unregister("SHOW_TOAST",this.onShowToast)}},{key:"render",value:function(){var e=this;return D.a.createElement(R.Toaster,{position:we.a.BOTTOM,usePortal:!1,className:"app-toaster"},this.state.toasts.map((function(t){return D.a.createElement(R.Toast,V()({},t,{key:t.id,onDismiss:function(){return e.onDismiss(t)}}))})))}}]),n}(D.a.PureComponent),Qe=n(74);function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var tt=function(e){x()(n,e);var t=et(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"onRemoveExternalElement",(function(e){_.Dispatch("REMOVE_EXTERNAL_ELEMENT",e)})),O()(v()(a),"onElementMenuItemClick",(function(e,t){_.Dispatch("CREATE_LAYERS",[{elementName:t}])})),O()(v()(a),"onElementMenuItemContextMenu",(function(e,t){e.preventDefault();var n=a.props.elements[t];if(n.isExternal){var r=D.a.createElement(R.Menu,null,n.manifest.description?D.a.createElement(R.MenuItem,{key:"desc",disabled:!0,text:n.manifest.description}):null,n.manifest.author?D.a.createElement(R.MenuItem,{key:"author",disabled:!0,text:"Author",label:n.manifest.author}):null,n.manifest.width&&n.manifest.height?D.a.createElement(R.MenuItem,{key:"dimensions",disabled:!0,text:"Dimensions",label:"".concat(n.manifest.width,"x").concat(n.manifest.height,"px")}):null,D.a.createElement(R.MenuDivider,{key:"divider"}),D.a.createElement(R.MenuItem,{key:"delete",icon:"delete",text:"Remove",intent:M.a.DANGER,onClick:function(){return a.onRemoveExternalElement(t)}}));R.ContextMenu.show(r,{left:e.clientX,top:e.clientY})}})),a.state={isMenuLockedOpen:!1},a}return y()(n,[{key:"render",value:function(){for(var e=this,t=[],n=function(){var n=r()(o[a],2),i=n[0],s=n[1];if(s.manifest.hideInMenu)return"continue";t.push(D.a.createElement(R.MenuItem,{key:i,text:s.manifest.name,onContextMenu:function(t){return e.onElementMenuItemContextMenu(t,i)},onClick:function(t){return e.onElementMenuItemClick(t,i)}}))},a=0,o=Object.entries(this.props.elements);a<o.length;a++)n();return D.a.createElement(R.Popover,{position:we.a.RIGHT_BOTTOM,interactionKind:R.PopoverInteractionKind.CLICK,boundary:"window",isOpen:!!this.state.isMenuLockedOpen||void 0},this.props.children,D.a.createElement(R.Menu,null,t))}}]),n}(D.a.PureComponent);n(470);function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var at=1,rt=2,ot=3,it=function(e){x()(n,e);var t=nt(n);function n(e){var a;return m()(this,n),a=t.call(this,e),O()(v()(a),"Editor",void 0),O()(v()(a),"onScriptTextChanged",(function(e){var t=e.target.value;a.state.validationState!=at&&a.setState({validationState:at}),a.props.onScriptChanged&&a.props.onScriptChanged(t)})),O()(v()(a),"onValidate",(function(){var e=a.props.scriptingContext.validateScript(a.props.script),t=null==e;return a.setState({validationState:t?ot:rt,validationError:e}),t})),O()(v()(a),"onExecute",(function(){a.onValidate()&&a.setState((function(e){var t=!e.isExecuting;return a.props.onExecutingChanged(t),{isExecuting:t,executionError:null}}))})),O()(v()(a),"getValidationDisplay",(function(){switch(a.state.validationState){case at:return{intent:M.a.NONE,icon:null,text:"Validate"};case ot:return{intent:M.a.SUCCESS,icon:"tick",text:"Validated"};case rt:return{intent:M.a.DANGER,icon:"cross",text:"Invalid"};default:return M.a.NONE}})),O()(v()(a),"getExecutionDisplay",(function(){return a.state.isExecuting?{intent:M.a.WARNING,icon:"stop",text:"Stop"}:a.props.scriptingContext.lastExecutionError?{intent:M.a.DANGER,icon:"cross",text:"Error"}:{intent:M.a.NONE,icon:"play",text:"Execute"}})),a.state={validationState:at,validationError:null,isExecuting:!1,executionError:null},a}return y()(n,[{key:"render",value:function(){if(!this.props.isOpen)return null;var e=this.getValidationDisplay(),t=this.getExecutionDisplay();return D.a.createElement("div",{className:"script-wrapper"},D.a.createElement(R.TextArea,{value:this.props.script,className:"editor",onChange:this.onScriptTextChanged}),D.a.createElement("div",{className:"button-bar"},D.a.createElement(R.Button,{icon:e.icon,onClick:this.onValidate,intent:e.intent,title:this.state.validationError},e.text),D.a.createElement(R.Button,{icon:t.icon,onClick:this.onExecute,intent:t.intent,title:this.state.executionError},t.text)))}}]),n}(D.a.Component),st=n(75);n(472);function lt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ut(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var ft=function(e){x()(n,e);var t=dt(n);function n(e){var a;m()(this,n),a=t.call(this,e),O()(v()(a),"_undoManager",new I),O()(v()(a),"_scriptingContext",new st.a({onUpdated:function(){a.forceUpdate()}})),O()(v()(a),"updateOverlay",function(){var e=d()(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){a.setState((function(e){var n="function"==typeof t?t(pt({},e.overlay)):pt(pt({},e.overlay),t);if(n)return{overlay:n}}),(function(){n&&(a._undoManager.createUndoPoint(a.state.overlay),a.emitOverlayChanged()),e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),O()(v()(a),"updateLayer",function(){var e=d()(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.updateOverlay((function(e){var a=e.layers.findIndex((function(e){return e.id==t}));if(-1!=a){var r="function"==typeof n?n(pt({},e.layers[a])):pt(pt({},e.layers[a]),n);if(r)return e.layers=l()(e.layers),e.layers[a]=r,e}}),r);case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),O()(v()(a),"emitOverlayChanged",(function(){a.props.onOverlayChanged&&a.props.onOverlayChanged(pt(pt({},a.state.overlay),{},{assets:a.state.assets}))})),O()(v()(a),"renderUploadProgress",(function(e,t){return t<1?D.a.createElement(D.a.Fragment,null,D.a.createElement(R.ProgressBar,{intent:"primary",stripes:!0,value:t}),D.a.createElement("div",null,e.name)):D.a.createElement(D.a.Fragment,null,D.a.createElement(R.ProgressBar,{intent:"success",stripes:!1,value:t}),D.a.createElement("div",null,e.name))})),O()(v()(a),"onWindowWheel",(function(e){e.ctrlKey&&(e.preventDefault(),e.stopPropagation())})),O()(v()(a),"onWindowKeyDown",(function(e){var t=e.ctrlKey||e.metaKey;if(!t||"+"!=e.key&&"-"!=e.key&&"0"!=e.key||(e.preventDefault(),e.stopPropagation()),"INPUT"!=e.target.tagName&&"SELECT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName)if("z"==e.key&&t&&a._undoManager.canUndo())a.onRestoreUndo(!1);else if("y"==e.key&&t&&a._undoManager.canRedo())a.onRestoreUndo(!0);else{if(a.state.selectedLayerIds.length>0){var n=a.state.overlay.layers.filter((function(e){return a.state.selectedLayerIds.includes(e.id)}));if("F2"==e.key)e.preventDefault(),_.Dispatch("EDIT_LAYER_NAME",n[0].id);else if("Delete"==e.key)e.preventDefault(),_.Dispatch("DELETE_LAYERS",a.state.selectedLayerIds);else if("c"==e.key&&t)e.preventDefault(),_.Dispatch("COPY_LAYERS",n);else if("c"==e.key)e.preventDefault(),n.forEach((function(e,t){var r={top:(a.props.height-e.height)/2,left:(a.props.width-e.width)/2};_.Dispatch("UPDATE_LAYER_CONFIG",e.id,r,t==n.length-1)}));else if("f"==e.key)e.preventDefault(),n.forEach((function(e,t){var r={top:0,left:0,height:a.props.height,width:a.props.width};_.Dispatch("UPDATE_LAYER_CONFIG",e.id,r,t==n.length-1)}));else if("["==e.key){e.preventDefault();var r=n.map((function(e){return{index:a.state.overlay.layers.indexOf(e),layer:e}})).sort((function(e,t){return e.index-t.index})),o=r.map((function(e){return e.index})).reduce((function(e,t){return Math.max(e,t)}),0);if(o==a.state.overlay.layers.length-1)return;e.ctrlKey&&(o=a.state.overlay.layers.length-2),r.forEach((function(e,t){var n=o+2-t;_.Dispatch("MOVE_LAYER",r[r.length-1-t].layer.id,n)}))}else if("]"==e.key){e.preventDefault();var i=n.map((function(e){return{index:a.state.overlay.layers.indexOf(e),layer:e}})).sort((function(e,t){return e.index-t.index})),s=i.map((function(e){return e.index})).reduce((function(e,t){return Math.min(e,t)}),1e4);if(0==s)return;e.ctrlKey&&(s=1),i.forEach((function(e,t){var n=s-1+t;_.Dispatch("MOVE_LAYER",i[t].layer.id,n)}))}else if("+"==e.key){e.preventDefault();var l=e.shiftKey?1.2:1.1;n.forEach((function(e,t){var a={height:e.height*l,width:e.width*l};_.Dispatch("UPDATE_LAYER_CONFIG",e.id,a,t==n.length-1)}))}else if("-"==e.key){e.preventDefault();var u=e.shiftKey?1.2:1.1;n.forEach((function(e,t){var a={height:e.height/u,width:e.width/u};_.Dispatch("UPDATE_LAYER_CONFIG",e.id,a,t==n.length-1)}))}else"ArrowRight"==e.key?(e.preventDefault(),n.forEach((function(a,r){var o=t?{left:1920-a.width}:{left:a.left+(e.shiftKey?1:5)};_.Dispatch("UPDATE_LAYER_CONFIG",a.id,o,r==n.length-1)}))):"ArrowLeft"==e.key?(e.preventDefault(),n.forEach((function(a,r){var o=t?{left:0}:{left:a.left-(e.shiftKey?1:5)};_.Dispatch("UPDATE_LAYER_CONFIG",a.id,o,r==n.length-1)}))):"ArrowDown"==e.key?(e.preventDefault(),n.forEach((function(a,r){var o=t?{top:1080-a.height}:{top:a.top+(e.shiftKey?1:5)};_.Dispatch("UPDATE_LAYER_CONFIG",a.id,o,r==n.length-1)}))):"ArrowUp"==e.key&&(e.preventDefault(),n.forEach((function(a,r){var o=t?{top:0}:{top:a.top-(e.shiftKey?1:5)};_.Dispatch("UPDATE_LAYER_CONFIG",a.id,o,r==n.length-1)})))}if("Tab"==e.key){var c=null;if(0==a.state.selectedLayerIds.length)a.state.overlay.layers.length>0&&(c=a.state.layers[0].id);else{var p=(a.state.overlay.layers.findIndex((function(e){return e.id==a.state.selectedLayerIds[0]}))+a.state.overlay.layers.length+(e.shiftKey?-1:1))%a.state.overlay.layers.length;c=a.state.overlay.layers[p].id}null!=c&&(e.preventDefault(),_.Dispatch("SELECT_LAYER",c,!1))}}})),O()(v()(a),"onPaste",(function(e){"INPUT"!=e.target.tagName&&"SELECT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName&&(e.preventDefault(),a.handleDataTransfer(e.clipboardData))})),O()(v()(a),"onAppWrapperDragOver",(function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="none"})),O()(v()(a),"onDragOver",(function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"})),O()(v()(a),"onDrop",(function(e){e.preventDefault(),e.stopPropagation(),a.handleDataTransfer(e.dataTransfer)})),O()(v()(a),"handleDataTransfer",function(){var e=d()(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.handleDataTransfer(t,a.onUpload);case 2:(n=e.sent)&&_.Dispatch("CREATE_LAYERS",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O()(v()(a),"onNameChanged",(function(e){var t=e.target.value;a.updateOverlay({name:t},!1)})),O()(v()(a),"onNameBlur",(function(e){var t=e.target.value;a.updateOverlay({name:t},!0)})),O()(v()(a),"onSetRendererPhase",(function(e){a.state.rendererPhase==e?a.setState({rendererPhase:"static"},(function(){requestAnimationFrame((function(){a.setState({rendererPhase:e})}))})):a.setState({rendererPhase:e})})),O()(v()(a),"onScriptPanelToggle",(function(){a.setState((function(e){return{scriptPanelIsOpen:!e.scriptPanelIsOpen}}))})),O()(v()(a),"onScriptChanged",(function(e){a.updateOverlay({script:e},!0)})),O()(v()(a),"onScriptExecutingChanged",(function(e){e?a._scriptingContext.execute(a.state.overlay):(a._scriptingContext.reset(),a.forceUpdate()),a.setState({isScriptExecuting:e})})),O()(v()(a),"onUpload",(function(e,t){return a.props.onUpload?a.props.onUpload(e,t):fe.toBase64(e).then((function(t){var n="asset:"+e.name;return a.setState((function(n){return{assets:pt(pt({},n.assets),{},O()({},e.name,t))}})),{url:n,dataUri:t}}))})),a.registerDispatcherCallbacks();var r=a.props.overlay?pt({},a.props.overlay):{};r.name||(r.name="New Overlay"),r.layers||(r.layers=[]),r.script||(r.script="");var o,i=a.props.disableBuiltinElements?{}:pt({},Qe.a.Builtin);return a.props.elements&&(i=pt(pt({},i),a.props.elements)),r.assets&&(o=r.assets,delete r.assets),a._undoManager.createUndoPoint(r),a.state={elements:i,overlay:r,assets:o,scriptPanelIsOpen:r.script.length>0,isScriptExecuting:!1,rendererPhase:"static",selectedLayerIds:[]},a}return y()(n,[{key:"onRestoreUndo",value:function(e){var t=this,n=this._undoManager.restoreUndoPoint(e);this.setState((function(e){return{overlay:n.overlay}}),d()(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.emitOverlayChanged();case 1:case"end":return e.stop()}}),e)}))))}},{key:"registerDispatcherCallbacks",value:function(){var e=this;_.Register("SELECT_LAYER",(function(t,n){e.setState((function(e){var a=e.selectedLayerIds;if(null==t)a=[];else if(n){var r=(a=l()(e.selectedLayerIds)).indexOf(t);-1!=r?a.splice(r,1):a.push(t)}else 1==a.length&&a[0].id==t||(a=[t]);return{selectedLayerIds:a}}))})),_.Register("CREATE_LAYERS",function(){var t=d()(c.a.mark((function t(n){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.map((function(t){var n=e.state.elements[t.elementName];if(!n)return null;var a,r=pt({},t.config||{}),o=lt(n.manifest.parameters);try{for(o.s();!(a=o.n()).done;){var i=a.value;r[i.name]||i.defaultValue&&(r[i.name]=i.defaultValue)}}catch(e){o.e(e)}finally{o.f()}return{elementName:t.elementName,label:t.label||n.manifest.name,top:t.top||0,left:t.left||0,width:t.width||n.manifest.width||0,height:t.height||n.manifest.height||0,effects:t.effects||(n.manifest.defaultEffects?pt({},n.manifest.defaultEffects):null),config:r}})),r=[],t.next=4,e.updateOverlay((function(e){var t,n=e.layers.map((function(e){return e.id})).reduce((function(e,t){return t>e?t:e}),1)+1,o=lt(a);try{var s=function(){var a=t.value;if(!a)return{v:void 0};var o=a.label;o.match(/\#\d+$/)&&(o=o.substr(0,o.lastIndexOf("#")-1));for(var i=o,s=2;e.layers.findIndex((function(e){return e.label==i}))>-1;s++)i=o+" #"+s;e.layers.unshift(pt(pt({},a),{},{id:n,label:i})),r.push(n),n++};for(o.s();!(t=o.n()).done;){var l=s();if("object"===i()(l))return l.v}}catch(e){o.e(e)}finally{o.f()}return e}),!0);case 4:e.setState((function(e){return{selectedLayerIds:r}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),_.Register("UPDATE_LAYER_CONFIG",function(){var t=d()(c.a.mark((function t(n,a,o){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateLayer(n,(function(e){for(var t=0,n=Object.entries(a);t<n.length;t++){var o=r()(n[t],2),i=o[0],s=o[1];"config"==i?e.config=Object.assign(e.config,s):e[i]=s}return e}),o);case 2:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),_.Register("MOVE_LAYER",function(){var t=d()(c.a.mark((function t(n,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateOverlay((function(e){e.layers=l()(e.layers);var t=e.layers.findIndex((function(e){return e.id==n})),r=e.layers.splice(t,1)[0];return a>t&&a--,e.layers.splice(a,0,r),e}),!0);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),_.Register("DELETE_LAYERS",function(){var t=d()(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateOverlay((function(e){e.layers=l()(e.layers);var t,a=lt(n);try{var r=function(){var n=t.value,a=e.layers.findIndex((function(e){return e.id==n}));e.layers.splice(a,1)};for(a.s();!(t=a.n()).done;)r()}catch(e){a.e(e)}finally{a.f()}return e}),!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),_.Register("COPY_LAYERS",(function(e){var t={objectType:"layers",data:e};T.CopyToClipboard(JSON.stringify(t))})),_.Register("ADD_EFFECT",function(){var t=d()(c.a.mark((function t(n,a){var r,o,i,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=ke.b[a]){t.next=3;break}return t.abrupt("return");case 3:o={},i=lt(r.parameters),t.prev=5,i.s();case 7:if((s=i.n()).done){t.next=14;break}if(null!=(l=s.value).defaultValue){t.next=11;break}return t.abrupt("continue",12);case 11:o[l.name]=l.defaultValue;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:return t.next=24,e.updateLayer(n,(function(e){if(!e.effects||!e.effects[a])return e.effects=pt(pt({},e.effects||[]),{},O()({},a,o)),e}),!0);case 24:case"end":return t.stop()}}),t,null,[[5,16,19,22]])})));return function(e,n){return t.apply(this,arguments)}}()),_.Register("UPDATE_EFFECT",function(){var t=d()(c.a.mark((function t(n,a,r,o){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateLayer(n,(function(e){return e.effects=pt(pt({},e.effects),{},O()({},a,pt(pt({},e.effects[a]),r))),e}),o);case 2:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()),_.Register("DELETE_EFFECT",function(){var t=d()(c.a.mark((function t(n,a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateLayer(n,(function(e){return e.effects=pt({},e.effects),delete e.effects[a],e}),!0);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),_.Register("CREATE_ASSETS",function(){var t=d()(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState((function(e){return{assets:pt(pt({},e.assets),n)}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("wheel",this.onWindowWheel),document.addEventListener("paste",this.onPaste),fe.on("upload-started",(function(t){_.Dispatch("SHOW_TOAST",{id:t.name,icon:"cloud-upload",message:e.renderUploadProgress(t,0),timeout:0,onCancel:function(){t.cancel&&t.cancel()}})})),fe.on("upload-progress",(function(t,n){_.Dispatch("SHOW_TOAST",{id:t.name,icon:"cloud-upload",message:e.renderUploadProgress(t,n/t.size),timeout:0})})),fe.on("upload-finished",(function(t){_.Dispatch("SHOW_TOAST",{id:t.name,icon:"cloud-upload",message:e.renderUploadProgress(t,1),timeout:500})})),fe.on("upload-error",(function(e,t){_.Dispatch("SHOW_TOAST",{id:e.name,icon:"error",intent:"danger",message:t,timeout:5e3})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("wheel",this.onWindowWheel),document.removeEventListener("paste",this.onPaste)}},{key:"render",value:function(){var e=this._scriptingContext.hasModifiedLayers?this._scriptingContext.layers:this.state.overlay.layers;return D.a.createElement("div",{className:"app-wrapper",onDragOver:this.onAppWrapperDragOver},D.a.createElement(qe,null),D.a.createElement("div",{className:"sidepanel-wrapper",style:{width:this.state.sidepanelWidth+"px"}},D.a.createElement("div",{className:"layer-list-wrapper"},D.a.createElement("div",{className:"layer-list"},D.a.createElement("div",{className:"layer-list-header"},D.a.createElement("div",{className:"left"},D.a.createElement(R.InputGroup,{value:this.state.overlay.name,onChange:this.onNameChanged,onBlur:this.onNameBlur})),D.a.createElement("div",{className:"right"},D.a.createElement(R.Button,{icon:"manually-entered-data",title:"Toggle Script Panel",onClick:this.onScriptPanelToggle,active:this.state.scriptPanelIsOpen})),D.a.createElement("div",{className:"right"},D.a.createElement(tt,{elements:this.state.elements},D.a.createElement(R.Button,{icon:"plus",intent:"primary"})))),D.a.createElement(Pe,{layers:this.state.overlay.layers,elements:this.state.elements,selectedLayerIds:this.state.selectedLayerIds,onUpload:this.onUpload})))),D.a.createElement(it,{isOpen:this.state.scriptPanelIsOpen,layers:this.state.overlay.layers,scriptingContext:this._scriptingContext,script:this.props.overlay.script,onScriptChanged:this.onScriptChanged,onExecutingChanged:this.onScriptExecutingChanged}),D.a.createElement("div",{className:"rightside-wrapper"},D.a.createElement("div",{className:"top-toolbar"},D.a.createElement(Ze,{layers:this.state.overlay.layers,elements:this.state.elements,selectedLayerIds:this.state.selectedLayerIds,rendererPhase:this.state.rendererPhase,onSetRendererPhase:this.onSetRendererPhase})),D.a.createElement("div",{className:"stage-wrapper",onDragOver:this.onDragOver,onDrop:this.onDrop},D.a.createElement(Ge,{stageWidth:this.props.width,stageHeight:this.props.height,layers:e,elements:this.state.elements,selectedLayerIds:this.state.selectedLayerIds,backgroundImages:this.props.backgroundImages},D.a.createElement(Ke.a,{elements:this.state.elements,elementProps:{assets:this.state.assets},layers:e,zIndex:1e3,hidden:this.props.hidden,forcePhase:this.state.rendererPhase,scriptingContext:this._scriptingContext})))))}}]),n}(D.a.Component);t.default=ft},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return p}));var a=n(0),r=n.n(a);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={General:["backgroundColor","border","cornerRadius","shadow","blur","opacity","cornerClip","padding"],Color:["brightness","contrast","saturation","hue","invert","sepia"],Text:["textStroke","textShadow","letterSpacing","lineHeight"],"3D":["theaterProjection"]},l=["animSlide","animSlideUp","animSlideDown","animSlideLeft","animSlideRight","animWipeLeftIn","animWipeRightIn","animWipeUpIn","animWipeDownIn","animFadeIn","animScaleIn","animBlurIn","animCustomEntry"],u=["animSlide","animSlideUpExit","animSlideDownExit","animSlideLeftExit","animSlideRightExit","animWipeLeftExit","animWipeRightExit","animWipeDownExit","animWipeUpExit","animScaleOutExit","animFadeOutExit","animBlurOutExit","animCustomExit"],c=["animSlide","animCustomStandard","animRotateStandard"];var p={backgroundColor:{type:"style",displayName:"Background Color",parameters:[{name:"color",type:"color",displayName:null,defaultValue:"#00000080"}],apply:function(e,t){e.backgroundColor=t.color}},border:{type:"style",displayName:"Border",parameters:[{name:"width",type:"number",displayName:"Thickness",defaultValue:5,inline:30},{name:"style",type:"select",displayName:"Type",defaultValue:"solid",inline:40,options:[{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"},{label:"Double",value:"double"},{label:"Groove",value:"groove"},{label:"Ridge",value:"ridge"},{label:"Inset",value:"inset"},{label:"Outset",value:"outset"}]},{name:"color",type:"color",displayName:"Color",defaultValue:"#FFFFFF",inline:30}],apply:function(e,t){e.borderWidth=t.width+"px",e.borderColor=t.color,e.borderStyle=t.style}},cornerRadius:{type:"style",displayName:"Corner Radius",parameters:[{name:"tl",type:"number",defaultValue:15,inline:25},{name:"tr",type:"number",defaultValue:15,inline:25},{name:"br",type:"number",defaultValue:15,inline:25},{name:"bl",type:"number",defaultValue:15,inline:25}],apply:function(e,t){e.borderRadius="".concat(t.tl||0,"px ").concat(t.tr||0,"px ").concat(t.br||0,"px ").concat(t.bl||0,"px")}},padding:{type:"style",displayName:"Padding",parameters:[{name:"t",type:"number",defaultValue:0,inline:25},{name:"r",type:"number",defaultValue:0,inline:25},{name:"b",type:"number",defaultValue:0,inline:25},{name:"l",type:"number",defaultValue:0,inline:25}],apply:function(e,t){e.padding="".concat(t.t||0,"px ").concat(t.r||0,"px ").concat(t.b||0,"px ").concat(t.l||0,"px"),console.log({oops:"".concat(t.t||0,"px ").concat(t.r||0,"px ").concat(t.b||0,"px ").concat(t.l||0,"px")})}},shadow:{type:"style",displayName:"Shadow",parameters:[{name:"offsetx",type:"number",displayName:"X",defaultValue:0,inline:20},{name:"offsety",type:"number",displayName:"Y",defaultValue:0,inline:20},{name:"size",type:"number",displayName:"Radius",defaultValue:5,inline:45},{name:"color",type:"color",displayName:"Color",defaultValue:"#00000080",inline:15}],apply:function(e,t){e.boxShadow="".concat(t.offsetx,"px ").concat(t.offsety,"px ").concat(t.size,"px ").concat(t.color)}},textStroke:{type:"style",displayName:"Text Stroke",parameters:[{name:"width",type:"number",displayName:"Width",defaultValue:5,inline:45},{name:"color",type:"color",displayName:"Color",defaultValue:"#000000",inline:15}],apply:function(e,t){e.webkitTextStroke="".concat(t.width,"px ").concat(t.color)}},textShadow:{type:"style",displayName:"Text Shadow",parameters:[{name:"offsetx",type:"number",displayName:"X",defaultValue:0,inline:20},{name:"offsety",type:"number",displayName:"Y",defaultValue:0,inline:20},{name:"size",type:"number",displayName:"Radius",defaultValue:5,inline:45},{name:"color",type:"color",displayName:"Color",defaultValue:"#00000080",inline:15}],apply:function(e,t){e.textShadow="".concat(t.offsetx,"px ").concat(t.offsety,"px ").concat(t.size,"px ").concat(t.color)}},blur:{type:"style",displayName:"Blur",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:10}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" blur(".concat(t.amount,"px)")}},brightness:{type:"style",displayName:"Brightness",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:50}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" brightness(".concat(2*t.amount,"%)")}},contrast:{type:"style",displayName:"Contrast",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:50}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" contrast(".concat(2*t.amount,"%)")}},saturation:{type:"style",displayName:"Saturation",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:50}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" saturate(".concat(2*t.amount,"%)")}},hue:{type:"style",displayName:"Hue Shift",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:0}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" hue-rotate(".concat(3.6*t.amount,"deg)")}},invert:{type:"style",displayName:"Invert",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:0}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" invert(".concat(t.amount,"%)")}},sepia:{type:"style",displayName:"Sepia",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:0}],apply:function(e,t){null==e.filter&&(e.filter=""),e.filter+=" sepia(".concat(t.amount,"%)")}},opacity:{type:"style",displayName:"Opacity",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:100}],apply:function(e,t){e.opacity="".concat(t.amount/100)}},cornerClip:{type:"style",displayName:"Corner Clip",parameters:[{name:"tl",type:"number",displayName:"Top Left",defaultValue:10,inline:25},{name:"tr",type:"number",displayName:"Top Right",defaultValue:0,inline:25},{name:"br",type:"number",displayName:"Bot. Right",defaultValue:0,inline:25},{name:"bl",type:"number",displayName:"Bot. Left",defaultValue:0,inline:25}],apply:function(e,t){var n="polygon(".concat(t.tl,"px 0, calc(100% - ").concat(t.tr,"px) 0, 100% ").concat(t.tr,"px, 100% calc(100% - ").concat(t.br,"px), calc(100% - ").concat(t.br,"px) 100%, ").concat(t.bl,"px 100%, 0 calc(100% - ").concat(t.bl,"px), 0 ").concat(t.tl,"px, ").concat(t.tl,"px 0)");e.clipPath=n}},letterSpacing:{type:"style",displayName:"Letter Spacing",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:0,min:-100,max:100}],apply:function(e,t){e.letterSpacing="".concat(t.amount,"px")}},lineHeight:{type:"style",displayName:"Line Height",parameters:[{name:"amount",type:"slider",displayName:null,defaultValue:0,min:0,max:200,labelStepSize:50}],apply:function(e,t){e.lineHeight="".concat(t.amount,"px")}},theaterProjection:{type:"transform",displayName:"Theater Projection",parameters:[{name:"amount",type:"slider",displayName:"Amount",defaultValue:25,inline:50},{name:"mode",type:"select",displayName:"Direction",defaultValue:"both",inline:40,options:[{value:"horizontal",label:"Horizontal"},{value:"vertical",label:"Vertical"},{value:"both",label:"Both"}]}],apply:function(e,t,n){var a=0,r=0;"horizontal"!=t.mode&&"both"!=t.mode||(a=(960-(n.left+n.width/2))/1920*(t.amount/50*180));"vertical"!=t.mode&&"both"!=t.mode||(r=(n.top+n.height/2-540)/1080*(t.amount/50*180));e.push({perspective:1e3}),e.push({rotate:[r,a,0]})}},animSlide:{type:"animation",animationType:"entrance",displayName:"Slide",parameters:[{name:"startx",type:"text",displayName:"Start X",defaultValue:"-100vh"},{name:"starty",type:"text",displayName:"Start Y",defaultValue:"0"},{name:"endx",type:"text",displayName:"End X",defaultValue:"0"},{name:"endy",type:"text",displayName:"End Y",defaultValue:"0"},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=t.startx||"-100vh",a=t.starty||"0",r=t.endx||"0",o=t.endy||"0",s=function(e){return e.replace(/[^a-zA-Z0-9\-_]/,"_")}("openoverlay-anim-slide-".concat(n).concat(a).concat(r).concat(o));e.push(i({name:s,keyframes:"@keyframes ".concat(s," { from { margin-left: ").concat(n,"; margin-top: ").concat(a,"; } to { margin-left: ").concat(r,"; margin-top: ").concat(o,"; } }")},t.animation))}},animSlideUp:{type:"animation",animationType:"entrance",displayName:"Slide Up",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-up",keyframes:"@keyframes openoverlay-anim-slide-up { from { margin-top: 150vh; } to { margin-top: 0; } }"},t.animation))}},animSlideDown:{type:"animation",animationType:"entrance",displayName:"Slide Down",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-down",keyframes:"@keyframes openoverlay-anim-slide-down { from { margin-top: -150vh; } to { margin-top: 0; } }"},t.animation))}},animSlideLeft:{type:"animation",animationType:"entrance",displayName:"Slide Left",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-left",keyframes:"@keyframes openoverlay-anim-slide-left { from { margin-left: 150vw; } to { margin-left: 0; } }"},t.animation))}},animSlideRight:{type:"animation",animationType:"entrance",displayName:"Slide Right",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-right",keyframes:"@keyframes openoverlay-anim-slide-right { from { margin-left: -150vw; } to { margin-left: 0; } }"},t.animation))}},animWipeLeftIn:{type:"animation",animationType:"entrance",displayName:"Wipe Left",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-left-in",keyframes:"@keyframes openoverlay-anim-wipe-left-in { from { clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%, 100% 0); } to { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0) } }"},t.animation))}},animWipeRightIn:{type:"animation",animationType:"entrance",displayName:"Wipe Right",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-right-in",keyframes:"@keyframes openoverlay-anim-wipe-right-in { from { clip-path: polygon(0 0, 0 0, 0 100%, 0 100%, 0 0); } to { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0) } }"},t.animation))}},animWipeUpIn:{type:"animation",animationType:"entrance",displayName:"Wipe Up",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-up-in",keyframes:"@keyframes openoverlay-anim-wipe-up-in { from { clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%, 0 100%); } to { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0) } }"},t.animation))}},animWipeDownIn:{type:"animation",animationType:"entrance",displayName:"Wipe Down",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-down-in",keyframes:"@keyframes openoverlay-anim-wipe-down-in { from { clip-path: polygon(0 0, 100% 0, 100% 0, 0 0, 0 0); } to { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0) } }"},t.animation))}},animFadeIn:{type:"animation",animationType:"entrance",displayName:"Fade In",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-fade-in",keyframes:"@keyframes openoverlay-anim-fade-in { from { opacity: 0; } to { opacity: 1; } }"},t.animation))}},animScaleIn:{type:"animation",animationType:"entrance",displayName:"Scale In",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-scale-in",keyframes:"@keyframes openoverlay-anim-scale-in { from { transform: scale(10); } to { transform: scale(1); } }"},t.animation))}},animBlurIn:{type:"animation",animationType:"entrance",displayName:"Blur In",parameters:[{name:"amount",type:"number",displayName:"Amount",defaultValue:10},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=t.amount||10;e.push(i({name:"openoverlay-anim-blur-in-"+n,keyframes:"@keyframes openoverlay-anim-blur-in-".concat(n," { from { filter: blur(").concat(n,"px); } to { filter: blur(0); } }")},t.animation))}},animCustomEntry:{type:"animation",animationType:"entrance",displayName:"Custom Entry",parameters:[{name:"keyframes",type:"textarea",displayName:"Keyframes",defaultValue:"@keyframes my-animation-name {\n0% {}\n100% {}\n}"},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=t.keyframes.match(/^@keyframes ([^ ]+)/i);if(n){var a=n[1];e.push(i({overwrite:!0,name:a,keyframes:t.keyframes},t.animation))}else console.log("Could not parse keyframes string: ".concat(t.keyframes))}},animSlideUpExit:{type:"animation",animationType:"exit",displayName:"Slide Up",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-up-exit",keyframes:"@keyframes openoverlay-anim-slide-up-exit { from { margin-top: 0; } to { margin-top: -150vh; } }"},t.animation))}},animSlideDownExit:{type:"animation",animationType:"exit",displayName:"Slide Down",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-down-exit",keyframes:"@keyframes openoverlay-anim-slide-down-exit { from { margin-top: 0; } to { margin-top: 150vh; } }"},t.animation))}},animSlideLeftExit:{type:"animation",animationType:"exit",displayName:"Slide Left",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-left-exit",keyframes:"@keyframes openoverlay-anim-slide-left-exit { from { margin-left: 0; } to { margin-left: -150vw; } }"},t.animation))}},animSlideRightExit:{type:"animation",animationType:"exit",displayName:"Slide Right",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-slide-right-exit",keyframes:"@keyframes openoverlay-anim-slide-right-exit { from { margin-left: 0; } to { margin-left: 150vw; } }"},t.animation))}},animWipeLeftExit:{type:"animation",animationType:"exit",displayName:"Wipe Left",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-left-exit",keyframes:"@keyframes openoverlay-anim-wipe-left-exit { from { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0); } to { clip-path: polygon(0 0, 0 0, 0 100%, 0 100%, 0 0); } }"},t.animation))}},animWipeRightExit:{type:"animation",animationType:"exit",displayName:"Wipe Right",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-right-exit",keyframes:"@keyframes openoverlay-anim-wipe-right-exit { from { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0); } to { clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 100%, 100% 0); } }"},t.animation))}},animWipeDownExit:{type:"animation",animationType:"exit",displayName:"Wipe Down",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-down-exit",keyframes:"@keyframes openoverlay-anim-wipe-down-exit { from { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0); } to { clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0 100%, 0 100%); } }"},t.animation))}},animWipeUpExit:{type:"animation",animationType:"exit",displayName:"Wipe Up",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-wipe-up-exit",keyframes:"@keyframes openoverlay-anim-wipe-up-exit { from { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%, 0 0); } to { clip-path: polygon(0 0, 100% 0, 100% 0, 0 0, 0 0); } }"},t.animation))}},animScaleOutExit:{type:"animation",animationType:"exit",displayName:"Scale Out",parameters:[{name:"amount",type:"number",displayName:"Amount",defaultValue:"10"},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=null==t.amount?10:parseFloat(t.amount);if(!isNaN(n)){var a="openoverlay-anim-scale-out-exit-".concat(parseInt(1e4*n));e.push(i({name:a,keyframes:"@keyframes ".concat(a," { from { transform: scale(1); } to { transform: scale(").concat(n,"); }")},t.animation))}}},animFadeOutExit:{type:"animation",animationType:"exit",displayName:"Fade Out",parameters:[{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){e.push(i({name:"openoverlay-anim-fade-out-exit",keyframes:"@keyframes openoverlay-anim-fade-out-exit { from { opacity: 1; } to { opacity: 0; } }"},t.animation))}},animBlurOutExit:{type:"animation",animationType:"exit",displayName:"Blur Out",parameters:[{name:"amount",type:"number",displayName:"Amount",defaultValue:10},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=t.amount||10;e.push(i({name:"openoverlay-anim-blur-out-"+n,keyframes:"@keyframes openoverlay-anim-blur-out-".concat(n," { from { filter: blur(0); } to { filter:  blur(").concat(n,"px); } }")},t.animation))}},animCustomExit:{type:"animation",animationType:"exit",displayName:"Custom Exit",parameters:[{name:"keyframes",type:"textarea",displayName:"Keyframes",defaultValue:"@keyframes my-animation-name {\n0% {}\n100% {}\n}"},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=t.keyframes.match(/^@keyframes ([^ ]+)/i);if(n){var a=n[1];e.push(i({overwrite:!0,name:a,keyframes:t.keyframes},t.animation))}else console.log("Could not parse keyframes string: ".concat(t.keyframes))}},animCustomStandard:{type:"animation",animationType:"standard",displayName:"Custom",parameters:[{name:"keyframes",type:"textarea",displayName:"Keyframes",defaultValue:"@keyframes my-animation-name {\n0% {}\n100% {}\n}"},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"500",delay:"0"}}],apply:function(e,t){var n=t.keyframes.match(/^@keyframes ([^ ]+)/i);if(n){var a=n[1];e.push(i({overwrite:!0,name:a,keyframes:t.keyframes},t.animation))}else console.log("Could not parse keyframes string: ".concat(t.keyframes))}},animRotateStandard:{type:"animation",animationType:"standard",displayName:"Rotate",parameters:[{name:"degrees",type:"number",displayName:"Degrees",defaultValue:360},{name:"animation",type:"animation",displayName:null,defaultValue:{duration:"2000",delay:"0",iterations:"infinite"}}],apply:function(e,t){var n=t.degrees||15;e.push(i({name:"openoverlay-anim-rotate-standard-"+n,keyframes:"@keyframes openoverlay-anim-rotate-standard-".concat(n," { from { transform: rotate(0); } to { transform: rotate(").concat(n,"deg); } }")},t.animation))}}}},72:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(0),i=n.n(o),s=n(4),l=n.n(s),u=new(function(){function e(){r()(this,e),i()(this,"_BUILTIN_FONTS",["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Lucida Sans Unicode","Lucida Console","Tahoma","Trebuchet MS","Times New Roman","Verdana"])}return l()(e,[{key:"GetFontNames",value:function(){return this._BUILTIN_FONTS}},{key:"LoadFont",value:function(e){return this._BUILTIN_FONTS.includes(e)?Promise.resolve():null}}]),e}()),c=new function e(){var t=this;r()(this,e),i()(this,"GetFontNames",(function(){return t._fontNames})),i()(this,"LoadFont",(function(e){return t._fontNames.includes(e)?new Promise((function(t,n){var a=document.createElement("link");a.rel="stylesheet",a.href="https://fonts.googleapis.com/css?family="+encodeURIComponent(e),a.addEventListener("load",t),a.addEventListener("abort",n),a.addEventListener("error",n),document.head.appendChild(a)})):null})),i()(this,"_fontNames",["ABeeZee","Abel","Abhaya Libre","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Aleo","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiko","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo","Archivo Black","Archivo Narrow","Aref Ruqaa","Arima Madurai","Arimo","Arizonia","Armata","Arsenal","Artifika","Arvo","Arya","Asap","Asap Condensed","Asar","Asset","Assistant","Astloch","Asul","Athiti","Atma","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","B612","B612 Mono","Bad Script","Bahiana","Bahianita","Bai Jamjuree","Baloo","Baloo Bhai","Baloo Bhaijaan","Baloo Bhaina","Baloo Chettan","Baloo Da","Baloo Paaji","Baloo Tamma","Baloo Tammudu","Baloo Thambi","Balthazar","Bangers","Barlow","Barlow Condensed","Barlow Semi Condensed","Barriecito","Barrio","Basic","Battambang","Baumans","Bayon","Belgrano","Bellefair","Belleza","BenchNine","Bentham","Berkshire Swash","Beth Ellen","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","BioRhyme","BioRhyme Expanded","Biryani","Bitter","Black And White Picture","Black Han Sans","Black Ops One","Blinker","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Bungee","Bungee Hairline","Bungee Inline","Bungee Outline","Bungee Shade","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Cairo","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Chakra Petch","Changa","Changa One","Chango","Charm","Charmonman","Chathura","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Coiny","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Cormorant","Cormorant Garamond","Cormorant Infant","Cormorant SC","Cormorant Unicase","Cormorant Upright","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Pro","Crimson Text","Croissant One","Crushed","Cuprum","Cute Font","Cutive","Cutive Mono","DM Sans","DM Serif Display","DM Serif Text","Damion","Dancing Script","Dangrek","Darker Grotesque","David Libre","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Do Hyeon","Dokdo","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Duru Sans","Dynalight","EB Garamond","Eagle Lake","East Sea Dokdo","Eater","Economica","Eczar","El Messiri","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Encode Sans","Encode Sans Condensed","Encode Sans Expanded","Encode Sans Semi Condensed","Encode Sans Semi Expanded","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fahkwang","Fanwood Text","Farro","Farsan","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Faustina","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Code","Fira Mono","Fira Sans","Fira Sans Condensed","Fira Sans Extra Condensed","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Frank Ruhl Libre","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gaegu","Gafata","Galada","Galdeano","Galindo","Gamja Flower","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Gothic A1","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Grenze","Griffy","Gruppo","Gudea","Gugi","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Harmattan","Headland One","Heebo","Henny Penny","Hepta Slab","Herr Von Muellerhoff","Hi Melody","Hind","Hind Guntur","Hind Madurai","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IBM Plex Mono","IBM Plex Sans","IBM Plex Sans Condensed","IBM Plex Serif","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Jomhuria","Josefin Sans","Josefin Slab","Joti One","Jua","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","K2D","Kadwa","Kalam","Kameron","Kanit","Kantumruy","Karla","Karma","Katibeh","Kaushan Script","Kavivanar","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kirang Haerang","Kite One","Knewave","KoHo","Kodchasan","Kosugi","Kosugi Maru","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Krub","Kumar One","Kumar One Outline","Kurale","La Belle Aurore","Lacquer","Laila","Lakki Reddy","Lalezar","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Lemonada","Lexend Deca","Lexend Exa","Lexend Giga","Lexend Mega","Lexend Peta","Lexend Tera","Lexend Zetta","Libre Barcode 128","Libre Barcode 128 Text","Libre Barcode 39","Libre Barcode 39 Extended","Libre Barcode 39 Extended Text","Libre Barcode 39 Text","Libre Baskerville","Libre Caslon Display","Libre Caslon Text","Libre Franklin","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Literata","Liu Jian Mao Cao","Livvic","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Long Cang","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","M PLUS 1p","M PLUS Rounded 1c","Ma Shan Zheng","Macondo","Macondo Swash Caps","Mada","Magra","Maiden Orange","Maitree","Major Mono Display","Mako","Mali","Mallanna","Mandali","Manuale","Marcellus","Marcellus SC","Marck Script","Margarine","Markazi Text","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Meera Inimai","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Mina","Miniver","Miriam Libre","Mirza","Miss Fajardose","Mitr","Modak","Modern Antiqua","Mogra","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Mukta","Mukta Mahee","Mukta Malar","Mukta Vaani","Muli","Mystery Quest","NTR","Nanum Brush Script","Nanum Gothic","Nanum Gothic Coding","Nanum Myeongjo","Nanum Pen Script","Neucha","Neuton","New Rocker","News Cycle","Niconne","Niramit","Nixie One","Nobile","Nokora","Norican","Nosifer","Notable","Nothing You Could Do","Noticia Text","Noto Sans","Noto Sans HK","Noto Sans JP","Noto Sans KR","Noto Sans SC","Noto Sans TC","Noto Serif","Noto Serif JP","Noto Serif KR","Noto Serif SC","Noto Serif TC","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Nunito Sans","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Overpass","Overpass Mono","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Padauk","Palanquin","Palanquin Dark","Pangolin","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Pattaya","Patua One","Pavanam","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poor Story","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Pridi","Princess Sofia","Prociono","Prompt","Prosto One","Proza Libre","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Rakkas","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rasa","Rationale","Ravi Prakash","Red Hat Display","Red Hat Text","Redressed","Reem Kufi","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Saira","Saira Condensed","Saira Extra Condensed","Saira Semi Condensed","Saira Stencil One","Salsa","Sanchez","Sancreek","Sansita","Sarabun","Sarala","Sarina","Sarpanch","Satisfy","Sawarabi Gothic","Sawarabi Mincho","Scada","Scheherazade","Schoolbell","Scope One","Seaweed Script","Secular One","Sedgwick Ave","Sedgwick Ave Display","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Shrikhand","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Single Day","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Song Myung","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Space Mono","Special Elite","Spectral","Spectral SC","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Sriracha","Srisakdi","Staatliches","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Stylish","Sue Ellen Francisco","Suez One","Sumana","Sunflower","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tajawal","Tangerine","Taprom","Tauri","Taviraj","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","Thasadith","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trirong","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Vollkorn SC","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yatra One","Yellowtail","Yeon Sung","Yeseva One","Yesteryear","Yrsa","ZCOOL KuaiLe","ZCOOL QingKe HuangYou","ZCOOL XiaoWei","Zeyada","Zhi Mang Xing","Zilla Slab","Zilla Slab Highlight"])};function p(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.a=new function e(){var t=this;r()(this,e),i()(this,"_loadedFonts",[]),i()(this,"_loadPromises",{}),i()(this,"_fontSources",[u,c]),i()(this,"_fontNames",void 0),i()(this,"GetFontNames",(function(){if(!t._fontNames){var e,n=[],a=p(t._fontSources);try{for(a.s();!(e=a.n()).done;){var r,o=p(e.value.GetFontNames());try{for(o.s();!(r=o.n()).done;){var i=r.value;n.push(i)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){a.e(e)}finally{a.f()}t._fontNames=n.sort()}return t._fontNames})),i()(this,"LoadFont",(function(e){if(t._loadedFonts.includes(e))return null;if(t._loadPromises[e])return t._loadPromises[e];var n,a=p(t._fontSources);try{for(a.s();!(n=a.n()).done;){var r=n.value.LoadFont(e);if(r)return t._loadPromises[e]=r,r.then((function(){return t._loadedFonts.push(e)})),r}}catch(e){a.e(e)}finally{a.f()}return null}))}},74:function(e,t,n){"use strict";var a=n(4),r=n.n(a),o=n(3),i=n.n(o),s=n(2),l=n.n(s),u=n(5),c=n.n(u),p=n(13),d=n.n(p),f=n(8),m=n.n(f),h=n(0),y=n.n(h),g=n(1),v=n.n(g);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var x=function(e){c()(n,e);var t=b(n);function n(){var e;i()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),y()(l()(e),"loadExternalScript",(function(t){e.props.scriptingContext&&e.props.scriptingContext.loadExternalScript(t)})),y()(l()(e),"emit",(function(t,n){e.props.scriptingContext&&e.props.layer&&e.props.scriptingContext.emit(t,n,e.props.layer)})),y()(l()(e),"isAssetUrl",(function(e){return!!e&&e.startsWith("asset:")})),y()(l()(e),"getAssetSource",(function(t){if(!t)return null;if(!e.props.assets)return null;if(!e.isAssetUrl(t))return null;var n=t.substr(6);return e.props.assets[n]})),e}return n}(v.a.PureComponent),S=function(e){c()(n,e);var t=b(n);function n(){return i()(this,n),t.apply(this,arguments)}return r()(n,[{key:"render",value:function(){var e=Object.assign({},{height:"100%",width:"100%"});return v.a.createElement("div",{style:e})}}]),n}(x);y()(S,"manifest",{name:"Rectangle",author:"SCI",description:"A customizable rectangle.",width:640,height:360,preserveAspect:!1,parameters:[],defaultEffects:{backgroundColor:{color:"#fff"}}});var E=function(e){c()(n,e);var t=b(n);function n(){var e;i()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),y()(l()(e),"_knockoutId",void 0),y()(l()(e),"_lastRect",void 0),e}return r()(n,[{key:"componentDidMount",value:function(){this._knockoutId=this.props.onRegisterKnockout(),this.props.onUpdateKnockout(this._knockoutId,this.buildPathString(this.props.layer,this.props.radius))}},{key:"componentDidUpdate",value:function(){this.props.onUpdateKnockout(this._knockoutId,this.buildPathString(this.props.layer,this.props.radius))}},{key:"componentWillUnmount",value:function(){this.props.onRemoveKnockout(this._knockoutId)}},{key:"buildPathString",value:function(e,t){var n;return null!=t&&t.length>0&&(n=parseInt(t)),n&&!isNaN(n)?(n=Math.min(Math.min(n,e.height/2),e.width/2),"M".concat(e.left," ").concat(e.top+n," L").concat(e.left," ").concat(e.top+e.height-n," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left+n," ").concat(e.top+e.height," L").concat(e.left+e.width-n," ").concat(e.top+e.height," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left+e.width," ").concat(e.top+e.height-n," L").concat(e.left+e.width," ").concat(e.top+n," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left+e.width-n," ").concat(e.top," L").concat(e.left+n," ").concat(e.top," A").concat(n," ").concat(n," 90 0 0 ").concat(e.left," ").concat(e.top+n)):"M".concat(e.left," ").concat(e.top," L").concat(e.left," ").concat(e.top+e.height," L").concat(e.left+e.width," ").concat(e.top+e.height," L").concat(e.left+e.width," ").concat(e.top," L").concat(e.left," ").concat(e.top)}},{key:"render",value:function(){return null}}]),n}(x);y()(E,"manifest",{name:"Knockout",author:"SCI",description:"A customizable knockout area.",width:400,height:400,preserveAspect:!1,parameters:[{name:"radius",displayName:"Corner Radius",type:"text"}]});var C=function(e){c()(n,e);var t=b(n);function n(){var e;i()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),y()(l()(e),"valignToAlignItems",(function(e){return"top"==e?"flex-start":"center"==e?"center":"bottom"==e?"flex-end":null})),y()(l()(e),"textAlignToJustifyContent",(function(e){return"left"==e?"flex-start":"center"==e?"center":"right"==e?"flex-end":null})),e}return r()(n,[{key:"render",value:function(){var e=Object.assign({},this.props.font,{height:"100%",width:"100%",overflow:"hidden",display:"flex",whiteSpace:this.props.wrap?"pre-wrap":"pre",alignItems:this.valignToAlignItems(this.props.valign),justifyContent:this.textAlignToJustifyContent(this.props.font.textAlign)});return v.a.createElement("div",{style:e},this.props.text)}}]),n}(x);y()(C,"manifest",{name:"Text",author:"SCI",description:"A customizable text element.",width:400,height:400,preserveAspect:!1,parameters:[{name:"text",displayName:"Text",type:"textarea",defaultValue:"text"},{name:"font",displayName:"Font",type:"font",defaultValue:{fontFamily:"Arial",fontSize:"144pt",color:"rgba(255,255,255,1)"}},{name:"wrap",displayName:"Wrapping",type:"checkbox",defaultValue:!1},{name:"valign",displayName:"Vertical Align",type:"valign",defaultValue:"flex-start"}]});var w=function(e){c()(n,e);var t=b(n);function n(){return i()(this,n),t.apply(this,arguments)}return r()(n,[{key:"render",value:function(){return v.a.createElement("svg",{style:{height:"100%",width:"100%"}},v.a.createElement("ellipse",{cx:"50%",cy:"50%",rx:"50%",ry:"50%",fill:this.props.fill}))}}]),n}(x);y()(w,"manifest",{name:"Ellipse",author:"SCI",description:"A customizable ellipse or circle.",width:400,height:400,preserveAspect:!1,parameters:[{name:"fill",type:"color",displayName:"Fill Color",defaultValue:"#FF0000"}]});var k=function(e){c()(n,e);var t=b(n);function n(e){var a;return i()(this,n),(a=t.call(this,e)).state={preloaded:a.isAssetUrl(e.url)},a.state.preloaded||new Promise((function(e,t){var n=new Image;n.addEventListener("load",e),n.addEventListener("error",e),n.addEventListener("abort",e),n.src=a.props.url})).finally((function(){a.setState({preloaded:!0})})),a}return r()(n,[{key:"render",value:function(){if(!this.state.preloaded)return null;var e=this.getAssetSource(this.props.url)||this.props.url;return v.a.createElement("img",{src:e,style:{height:"100%",width:"100%",objectFit:this.props.fit,objectPosition:this.props.offset}})}}]),n}(x);y()(k,"manifest",{name:"Image",author:"SCI",description:"A customizable image.",width:400,height:400,preserveAspect:!0,parameters:[{name:"url",displayName:"Url/Asset",type:"assetUrl",accept:"image/*"},{name:"fit",displayName:"Fit",type:"select",defaultValue:"cover",options:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"Fill",value:"fill"}]},{name:"offset",displayName:"Offset",type:"text"}]});var O=function(e){c()(n,e);var t=b(n);function n(e){var a;return i()(this,n),a=t.call(this,e),y()(l()(a),"_vidRef",void 0),y()(l()(a),"onLoadedData",(function(e){a.setState({preloaded:!0}),a.props.playing&&a._vidRef.current.play().catch((function(e){console.log(e.message)}))})),a._vidRef=v.a.createRef(),a.state={preloaded:!1},a}return r()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.playing&&!(this.props.container&&this.props.container.hidden)&&!this.props.hidden;t!=(e.playing&&!(e.container&&e.container.hidden)&&!e.hidden)&&(this._vidRef.current.currentTime=0,t?this._vidRef.current.play():this._vidRef.current.pause()),e.url!=this.props.url&&this._vidRef.current.load(),this._vidRef.current.volume=(null!=this.props.volume?this.props.volume:100)/100}},{key:"render",value:function(){var e={height:"100%",width:"100%",objectFit:this.props.fit,objectPosition:this.props.offset,opacity:this.state.preloaded?1:0},t=this.getAssetSource(this.props.url)||this.props.url;return v.a.createElement("video",{ref:this._vidRef,onLoadedData:this.onLoadedData,loop:this.props.loop,style:e},v.a.createElement("source",{src:t}))}}]),n}(x);y()(O,"manifest",{name:"Video",author:"SCI",description:"A customizable video player.",width:1280,height:720,preserveAspect:!0,parameters:[{name:"url",displayName:"Url/Asset",type:"assetUrl",accept:"video/*"},{name:"playing",type:"checkbox",displayName:"Playing",defaultValue:!0},{name:"loop",type:"checkbox",displayName:"Loop",defaultValue:!1},{name:"volume",type:"slider",displayName:"Volume",defaultValue:100},{name:"fit",displayName:"Fit",type:"select",defaultValue:"cover",options:[{label:"Contain",value:"contain"},{label:"Cover",value:"cover"},{label:"Fill",value:"fill"}]},{name:"offset",displayName:"Offset",type:"text"}]});var A=function(e){c()(n,e);var t=b(n);function n(e){var a;return i()(this,n),a=t.call(this,e),y()(l()(a),"_audioRef",void 0),y()(l()(a),"onLoadedData",(function(e){a.setState({preloaded:!0}),a.props.playing&&a._audioRef.current.play().catch((function(e){console.log(e.message)}))})),a._audioRef=v.a.createRef(),a.state={preloaded:!1},a}return r()(n,[{key:"componentDidUpdate",value:function(e){this._audioRef.current.volume=(null!=this.props.volume?this.props.volume:100)/100,this.props.playing!=e.playing&&(this.props.playing||null==e.playing?this._audioRef.current.play():this._audioRef.current.pause()),this.props.url!=e.url&&this._audioRef.current.load()}},{key:"render",value:function(){var e=this.getAssetSource(this.props.url)||this.props.url;return v.a.createElement("audio",{ref:this._audioRef,onLoadedData:this.onLoadedData,loop:this.props.loop},v.a.createElement("source",{src:e}))}}]),n}(x);y()(A,"manifest",{name:"Audio",author:"SCI",description:"A customizable audio player.",nonVisual:!0,parameters:[{name:"url",displayName:"Url/Asset",type:"assetUrl",accept:"audio/*"},{name:"playing",type:"checkbox",displayName:"Playing",defaultValue:!0},{name:"loop",type:"checkbox",displayName:"Loop",defaultValue:!1},{name:"volume",type:"slider",displayName:"Volume",defaultValue:100}]});var D=function(e){c()(n,e);var t=b(n);function n(){return i()(this,n),t.apply(this,arguments)}return r()(n,[{key:"render",value:function(){var e=this.getAssetSource(this.props.url)||this.props.url;return v.a.createElement("iframe",{src:e,style:{border:"0",height:"100%",width:"100%"}})}}]),n}(x);y()(D,"manifest",{name:"Iframe",author:"SCI",description:"A customizable iframe.",width:1280,height:720,preserveAspect:!1,parameters:[{name:"url",type:"assetUrl",displayName:"Url/Asset",accept:"text/html"}]});var R=function(e){c()(n,e);var t=b(n);function n(e){var a;return i()(this,n),a=t.call(this,e),y()(l()(a),"_queuedOperations",{playing:[]}),y()(l()(a),"_targetRef",void 0),y()(l()(a),"onStateChange",(function(e){if(1==e.data)for(;a._queuedOperations.playing.length>0;)a._queuedOperations.playing.splice(0,1)[0]()})),y()(l()(a),"updatePlayerState",(function(e,t){if(t.url!=e.url){var n=a.getYoutubeUrl(t);a._player.loadVideoByUrl(n),a._queuedOperations.playing.push((function(){a._player.seekTo(0)}))}if(t.url!=e.url||t.start!=e.start){var r=a._player.getPlayerState();1==r||-1==r?a._player.seekTo(t.start):a._queuedOperations.playing.push((function(){a._player.seekTo(t.start)}))}t.playing!=e.playing&&(t.playing?a._player.playVideo():a._player.pauseVideo()),t.volume!=e.volume&&a._player.setVolume(t.volume)})),y()(l()(a),"getYoutubeUrl",(function(e){if(!e.url)return"";var t=e.url.match(n.URL_REGEX);if(null==t||t.length<2||0==t[1].length)return"";var a=t[1];return"http://www.youtube.com/v/".concat(a,"?version=3")})),a._targetRef=v.a.createRef(),window.onYouTubeIframeAPIReadyPromise||(window.onYouTubeIframeAPIReadyPromise=new Promise((function(e){if(window.YT)e();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://www.youtube.com/iframe_api",document.head.append(t),window.onYouTubeIframeAPIReady=e}}))),a}return r()(n,[{key:"componentDidMount",value:function(){var e=this,t=this;window.onYouTubeIframeAPIReadyPromise.then((function(){var n=new YT.Player(e._targetRef.current,{width:"100%",height:"100%",playerVars:{controls:0,modestbranding:1},events:{onReady:function(e){t.updatePlayerState({},t.props)},onStateChange:t.onStateChange}});e._player=n}))}},{key:"componentDidUpdate",value:function(e){this.updatePlayerState(e,this.props)}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}),v.a.createElement("div",{style:{overflow:"hidden",height:"100%",width:"100%",display:null!=this.props.url&&this.props.url.length>0?"block":"none"}},v.a.createElement("div",{ref:this._targetRef})))}}]),n}(x);y()(R,"manifest",{name:"Youtube",author:"SCI",description:"A customizable YouTube player.",width:1280,height:720,preserveAspect:!0,parameters:[{name:"url",type:"text",displayName:"Url",inline:78},{name:"start",type:"text",displayName:"Start (s)",inline:20},{name:"volume",type:"slider",displayName:"Volume",defaultValue:100,inline:70},{name:"playing",type:"checkbox",displayName:"Playing",defaultValue:!0,inline:20,compact:!1}]}),y()(R,"URL_REGEX",/.*(?:www\.youtube\.com\/(?:(?:watch\?v=)|(?:embed\/))|(?:youtu\.be\/))([a-z0-9]+)(?:\?(?:(?:t)|(?:start))=(\d+))?/i);var T=function(e){c()(n,e);var t=b(n);function n(){var e;i()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),y()(l()(e),"loadSource",(function(){var t=e.getAssetSource(e.props.url);if(t){if(t.length<=28)return void console.log("Asset data was malformed.");var n=atob(t.substr(28));e.props.scriptingContext.loadExternalScript(e.props.url,Promise.resolve(n))}else{var a=fetch(e.props.url).then((function(e){return e.text()})).catch((function(t){console.log("Could not fetch ".concat(e.props.url,": ").concat(t))}));e.props.scriptingContext.loadExternalScript(e.props.url,a)}})),e}return r()(n,[{key:"componentDidMount",value:function(){this.props.scriptingContext&&this.loadSource()}},{key:"componentDidUpdate",value:function(e,t){this.props.scriptingContext&&e.url!=this.props.url&&(this.props.scriptingContext.unloadExternalScript(e.url),this.loadSource())}},{key:"componentWillUnmount",value:function(){this.props.scriptingContext&&this.state.source&&this.props.url&&this.props.scriptingContext.unloadExternalScript(this.props.url)}},{key:"render",value:function(){return null}}]),n}(x);y()(T,"manifest",{name:"External Script",author:"SCI",description:"An external Javascript resource.",nonVisual:!0,parameters:[{name:"url",displayName:"Url/Asset",type:"assetUrl",accept:"text/javascript"}]}),t.a={Builtin:{rectangle:S,text:C,ellipse:w,image:k,video:O,audio:A,knockout:E,iframe:D,youtube:R,script:T}}},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var a=n(32),r=n.n(a),o=n(49),i=n.n(o),s=n(3),l=n.n(s),u=n(4),c=n.n(u),p=n(0),d=n.n(p),f=n(14),m=n.n(f),h=n(31),y=n.n(h),g=n(25),v=n.n(g),b=n(46),x=n.n(b);function S(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function C(e){return e?"object"===y()(e)?w:k:null}function w(e,t){for(var n=0,a=Object.entries(t);n<a.length;n++){var r=m()(a[n],2),o=r[0],i=r[1];if(e[o]!=i)return!1}return!0}function k(e,t){return e.label==t}var O=function(){function e(t,n,a){var r=this;l()(this,e),d()(this,"_eventHandlers",void 0),d()(this,"_layers",void 0),d()(this,"_lastUpdated",void 0),d()(this,"_onUpdated",void 0),d()(this,"_hasModifiedLayers",void 0),d()(this,"_maxLayerId",void 0),d()(this,"emit",(function(e,t,n){var a=r._eventHandlers[e];if(a){var o,i=S(a);try{for(i.s();!(o=i.n()).done;){var s=o.value;n&&s.matchFunction&&!s.matchFunction(n,s.layerFilter)||s.callback(t,n)}}catch(e){i.e(e)}finally{i.f()}}})),d()(this,"on",(function(e,t,n){var a,o=r._eventHandlers[e];o||(o=[],r._eventHandlers[e]=o),n?a=t:n=t;var i=a?C(a):null;o.push({matchFunction:i,layerFilter:a,callback:n})})),d()(this,"setLayer",(function(e,t){t||(t=e,e=null);for(var n=C(e),a="function"==typeof t,o=0;o<r._layers.length;o++)if(!n||n(r._layers[o],e)){var i=a?t(r._layers[o]):t;if(i){var s=v()(r._layers[o]);x()(s,i),r._layers[o]=s,r._hasModifiedLayers=!0}}})),d()(this,"cloneLayer",(function(e){if(!e)return null;var t,n,a=C(e),o=S(r._layers);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(a(i,e)){t=i;break}}}catch(e){o.e(e)}finally{o.f()}if(!t)return null;var s=v()(t);return delete s.id,s})),d()(this,"addLayer",(function(e){e.id=++r._maxLayerId,r._hasModifiedLayers=!0,r._layers.push(e)})),d()(this,"removeLayer",(function(e){if(!e)return null;var t,n=C(e),a=[],o=S(r._layers);try{for(o.s();!(t=o.n()).done;){var i=t.value;n(i,e)&&a.push(i)}}catch(e){o.e(e)}finally{o.f()}for(var s=0,l=a;s<l.length;s++){var u=l[s];r._layers.splice(r._layers.indexOf(u),1)}return r._hasModifiedLayers=!0,a})),d()(this,"update",(function(){r._onUpdated()})),this._eventHandlers={},this._layers=t||[],this._lastUpdated=n,this._onUpdated=a,this._hasModifiedLayers=!1,this._maxLayerId=this._layers.reduce((function(e,t){return t.id>e?t.id:e}),0)}return c()(e,[{key:"hasModifiedLayers",get:function(){return this._hasModifiedLayers}},{key:"layers",get:function(){return this._layers}},{key:"lastUpdated",get:function(){return this._lastUpdated}}]),e}(),A=function(){function e(t){var n=this;l()(this,e),d()(this,"_onUpdated",void 0),d()(this,"_overlayContext",void 0),d()(this,"_lastExecutionError",void 0),d()(this,"_interceptedTimeouts",[]),d()(this,"_interceptedIntervals",[]),d()(this,"_externalScripts",{}),d()(this,"emit",(function(e,t,a){n._overlayContext&&n._overlayContext.emit(e,t,a)})),d()(this,"reset",(function(){var e,t=S(n._interceptedTimeouts);try{for(t.s();!(e=t.n()).done;){var a=e.value;clearTimeout(a)}}catch(e){t.e(e)}finally{t.f()}n._interceptedTimeouts=[];var r,o=S(n._interceptedIntervals);try{for(o.s();!(r=o.n()).done;){var i=r.value;clearInterval(i)}}catch(e){o.e(e)}finally{o.f()}n._interceptedIntervals=[],n._overlayContext=null})),d()(this,"validateScript",(function(e){try{return window.Function("return function() { ".concat(e," }"))(),null}catch(e){return e}})),d()(this,"loadExternalScript",(function(e,t){n._externalScripts[e]=t})),d()(this,"unloadExternalScript",(function(e){delete n._externalScripts[e]})),d()(this,"getExternalScripts",i()(r.a.mark((function e(){var t,a,o,i,s,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=0,o=Object.entries(n._externalScripts);case 2:if(!(a<o.length)){e.next=13;break}return i=m()(o[a],2),s=i[0],l=i[1],t.push("//# sourceURL=".concat(s)),e.t0=t,e.next=8,l;case 8:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 10:a++,e.next=2;break;case 13:return e.abrupt("return",t.join("\r\n"));case 14:case"end":return e.stop()}}),e)})))),d()(this,"setTimeoutOverride",(function(e,t){var a=setTimeout(e,t);return n._interceptedTimeouts.push(a),a})),d()(this,"setIntervalOverride",(function(e,t){var a=setInterval(e,t);return n._interceptedIntervals.push(a),a})),d()(this,"execute",(function(e){n._overlayContext=new O(v()(e.layers),Date.now(),n._onUpdated);try{return n._lastExecutionError=null,n.getExternalScripts().then((function(t){window.Function("return function(overlay, executeExternalScripts, setTimeout, setInterval) { ".concat(t,"\r\n ").concat(e.script," }"))()(n._overlayContext,n.setTimeoutOverride,n.setIntervalOverride)})).catch((function(e){n._lastExecutionError=e})),!0}catch(e){return n._lastExecutionError=e,!1}})),this._onUpdated=t.onUpdated}return c()(e,[{key:"lastExecutionError",get:function(){return this._lastExecutionError}},{key:"hasModifiedLayers",get:function(){return null!=this._overlayContext&&1==this._overlayContext.hasModifiedLayers}},{key:"layers",get:function(){return this._overlayContext?this._overlayContext.layers:[]}}]),e}()},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var a=n(47),r=n.n(a),o=n(3),i=n.n(o),s=n(4),l=n.n(s),u=n(2),c=n.n(u),p=n(5),d=n.n(p),f=n(13),m=n.n(f),h=n(8),y=n.n(h),g=n(0),v=n.n(g),b=n(14),x=n.n(b),S=n(1),E=n.n(S),C=n(48);n(97);function w(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=new(function(){function e(){i()(this,e),v()(this,"_stylesheet",void 0),v()(this,"_loadedKeyframes",[])}return l()(e,[{key:"ensureKeyframes",value:function(e,t,n){if(!this._loadedKeyframes.includes(e)||n){this._ensureStylesheet();var a,r=0,o=w(this._stylesheet.cssRules);try{for(o.s();!(a=o.n()).done;){if(a.value.name==e){if(!n)return void this._loadedKeyframes.push(e);this._stylesheet.deleteRule(r);break}r++}}catch(e){o.e(e)}finally{o.f()}try{this._stylesheet.insertRule(t)}catch(e){}this._loadedKeyframes.push(e)}}},{key:"_ensureStylesheet",value:function(){if(!this._stylesheet){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if("openoverlay-animations"==t.title)return void(this._stylesheet=t)}var n=document.createElement("style");n.type="text/css",n.title="openoverlay-animations",document.head.appendChild(n),this._stylesheet=document.styleSheets[document.styleSheets.length-1]}}}]),e}()),A=n(73),D=n(72);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}function L(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(e){var t,n=[],a=L(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;O.ensureKeyframes(r.name,r.keyframes,r.overwrite),null==r.duration&&(r.duration="500"),null==r.timing&&(r.timing="ease"),null==r.delay&&(r.delay="0"),null==r.iterations&&(r.iterations="1"),null==r.direction&&(r.direction="normal"),n.push("".concat(r.name," ").concat(r.duration,"ms ").concat(r.timing," ").concat(r.delay,"ms ").concat(r.iterations," ").concat(r.direction," both"))}}catch(e){a.e(e)}finally{a.f()}return n.join(",")}function I(e,t){var n=parseInt(t.duration||0)+parseInt(t.delay||0);return e<n?n:e}var M="entering",F="visible",V="exiting",B="hidden",U=function(e){d()(n,e);var t=P(n);function n(e){var a;return i()(this,n),a=t.call(this,e),v()(c()(a),"_phaseChangeTimeout",void 0),v()(c()(a),"computeEffectsMemoized",Object(A.a)((function(e){var t={top:e.top+"px",left:e.left+"px",height:e.height+"px",width:e.width+"px",transition:e.transition};e.style&&(t=T({},t));var n=T({},e.style),a=[],r=[],o=[],i=[];e.rotation&&a.push({rotate:[0,0,e.rotation]}),e.effects&&Object.entries(e.effects).forEach((function(t){var s=x()(t,2),l=s[0],u=s[1],c=C.b[l];if(c)switch(c.type){case"style":c.apply(n,u,e);break;case"transform":c.apply(a,u,e);break;case"animation":switch(c.animationType){case"entrance":c.apply(r,u,e);break;case"standard":c.apply(o,u,e);break;case"exit":c.apply(i,u,e)}}}));var s,l=!1,u=0;r.length>0&&(s=N(r),u=r.reduce(I,0),l=!0);var c,p=0;o.length>0&&(c=N(o),p=o.reduce(I,0),l=!0);var d,f,m=0;return i.length>0&&(d=N(i),m=i.reduce(I,0),l=!0),l&&(n.willChange="transform, filter",a.translateZ=0),a.length>0&&(f=function(e){var t,n={},a=L(e);try{for(a.s();!(t=a.n()).done;)for(var r=t.value,o=0,i=Object.entries(r);o<i.length;o++){var s=x()(i[o],2),l=s[0],u=s[1];switch(l){case"rotate":case"translate":n[l]||(n[l]=[0,0,0]),n[l][0]+=u[0],n[l][1]+=u[1],n[l][2]+=u[2];break;default:n[l]=u}}}catch(e){a.e(e)}finally{a.f()}var c="";return null!=n.perspective&&(c+=" perspective(".concat(n.perspective,"px)")),n.rotate&&(c+=" rotateX(".concat(n.rotate[0],"deg) rotateY(").concat(n.rotate[1],"deg) rotateZ(").concat(n.rotate[2],"deg)")),n.translate&&(c+=" translate3d(".concat(n.translate[0],"px,").concat(n.translate[1],"px,").concat(n.translate[2],"px)")),null!=n.translateZ&&(c+=" translateZ(".concat(n.translateZ,"px)")),c}(a)),{position:t,style:n,transform:f,entranceAnimation:s,entranceAnimationDuration:u,standardAnimation:c,standardAnimationDuration:p,exitAnimation:d,exitAnimationDuration:m}}))),v()(c()(a),"emit",(function(e,t){a.props.scriptingContext.emitToOtherLayers(e,t,a.props.layer)})),v()(c()(a),"loadExternalScript",(function(e){a.props.scriptingContext.loadExternalScript(e)})),a.state={isExiting:!1,phase:a.props.hidden?B:a.props.forcePhase?a.props.forcePhase:M},a}return l()(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this;if(!this.props.forcePhase||e.forcePhase==this.props.forcePhase&&e.hidden==this.props.hidden){if(e.hidden!=this.props.hidden){var n=this.computeEffectsMemoized(this.props.layer);this.props.hidden?n.exitAnimation?this.setState({phase:V},(function(){t._phaseChangeTimeout&&clearTimeout(t._phaseChangeTimeout),t._phaseChangeTimeout=setTimeout((function(){t.setState({phase:B})}),n.exitAnimationDuration)})):(this._phaseChangeTimeout&&clearTimeout(this._phaseChangeTimeout),this.setState({phase:B})):n.entranceAnimation?this.setState({phase:M},(function(){t._phaseChangeTimeout&&clearTimeout(t._phaseChangeTimeout),t._phaseChangeTimeout=setTimeout((function(){t.setState({phase:F})}),n.entranceAnimationDuration)})):(this._phaseChangeTimeout&&clearTimeout(this._phaseChangeTimeout),this.setState({phase:F}))}}else this.setState({phase:this.props.hidden?B:this.props.forcePhase})}},{key:"render",value:function(){if(this.state.phase==B)return null;var e,t=this.computeEffectsMemoized(this.props.layer);switch(this.state.phase){case M:e=t.entranceAnimation;break;case F:e=t.standardAnimation;break;case V:e=t.exitAnimation}var n,a=this.props.elementProps||{};return n=this.props.wireframeMode?E.a.createElement("div",{style:{height:"100%",width:"100%",border:"1px solid red"}}):E.a.createElement("div",{className:"layer-container-inner",style:T(T({},t.style),{},{transform:t.transform})},E.a.createElement(this.props.Element,r()({},a,this.props.layer.config,{layer:this.props.layer,hidden:this.props.hidden,scriptingContext:this.props.scriptingContext,onRegisterKnockout:this.props.onRegisterKnockout,onUpdateKnockout:this.props.onUpdateKnockout,onRemoveKnockout:this.props.onRemoveKnockout}))),E.a.createElement("div",{className:"layer-container","data-id":this.props.layer.id,style:T(T({},t.position),{},{zIndex:this.props.zIndex,animation:e})},n)}}]),n}(E.a.PureComponent),z=function(e){d()(n,e);var t=P(n);function n(e){var a;return i()(this,n),a=t.call(this,e),v()(c()(a),"_knockoutIdCounter",0),v()(c()(a),"ensureFonts",(function(){var e,t=L(a.props.layers);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=a.props.elements[n.elementName];if(r){var o,i=L(r.manifest.parameters);try{for(i.s();!(o=i.n()).done;){var s=o.value;if("font"==s.type){var l=n.config[s.name];if(l&&l.fontFamily){var u=D.a.LoadFont(l.fontFamily);u&&(a.setState({isLoadingFonts:!0}),u.then((function(){a.setState({isLoadingFonts:!1})})))}}}}catch(e){i.e(e)}finally{i.f()}}}}catch(e){t.e(e)}finally{t.f()}})),v()(c()(a),"onRegisterKnockout",(function(){var e=a._knockoutIdCounter++;return a.setState((function(t){var n=Object.assign({},t.knockouts);return n[e]="",{knockouts:n}})),e})),v()(c()(a),"onUpdateKnockout",(function(e,t){a.setState((function(n){var a=Object.assign({},n.knockouts);return a[e]=t,{knockouts:a}}))})),v()(c()(a),"onRemoveKnockout",(function(e){a.setState((function(t){var n=Object.assign({},t.knockouts);return delete n[e],{knockouts:n}}))})),a.state={isLoadingFonts:!1,knockouts:{}},a}return l()(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate({})}},{key:"componentDidUpdate",value:function(e){e.layers!=this.props.layers&&this.ensureFonts()}},{key:"renderKnockouts",value:function(e){return E.a.createElement("svg",{style:{position:"absolute",top:"-99999px"},viewBox:"0 0 1920 1080",xmlns:"http://www.w3.org/2000/svg"},E.a.createElement("defs",null,E.a.createElement("clipPath",{id:"knockoutClippath_"+this.props.id},E.a.createElement("path",{d:"M-10000 -10000 L10000 -10000 L10000 10000 L-10000 10000 L-10000 -10000 "+e.join(" ")+"Z"}))))}},{key:"render",value:function(){var e=this;if(this.state.isLoadingFonts)return null;var t=this.props.layers.map((function(t,n){var a=e.props.elements[t.elementName];if(!a)return null;var r=t.hidden||e.props.hidden,o=(e.props.zIndex||0)-n;return E.a.createElement(U,{key:t.id,hidden:r,layer:t,Element:a,zIndex:o,wireframeMode:e.props.wireframeMode,forcePhase:e.props.forcePhase,elementProps:e.props.elementProps,scriptingContext:e.props.scriptingContext,onRegisterKnockout:e.onRegisterKnockout,onRemoveKnockout:e.onRemoveKnockout,onUpdateKnockout:e.onUpdateKnockout})})),n=Object.values(this.state.knockouts),a={zIndex:this.props.zIndex};return n.length>0&&(a.clipPath="url(#knockoutClippath_"+this.props.id+")"),E.a.createElement("div",{className:"knockout-wrapper",style:a},n.length>0?this.renderKnockouts(n):null,t)}}]),n}(E.a.Component)},97:function(e,t,n){var a=n(98);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(83)(a,r);a.locals&&(e.exports=a.locals)},98:function(e,t,n){(t=n(82)(!1)).push([e.i,".knockout-wrapper { position: absolute; width: 100%; height: 100%; }\r\n.layer-container { position: absolute; /*overflow: hidden;*/ }\r\n.layer-container-inner { width: 100%; height: 100%; box-sizing: content-box; }",""]),e.exports=t}}]);